import{F as y}from"./bootstrap.ce8e0264.js";import{n as w}from"./setup.a0d5dcd7.js";import{_ as x}from"./plugin-vue_export-helper.21dcd24c.js";import{b1 as o,aA as d,aB as a,K as u,b6 as b,x as k,br as m,b8 as f,ay as v,ao as r,b7 as F,aF as c}from"./runtime-core.esm-bundler.d70d6a40.js";import"./lang.2d0006f0.js";import"./runtime-dom.esm-bundler.672daa05.js";import"./preload-helper.15853ff5.js";import"./vue-router.dd08a92b.js";import"./components.6b1fa4e4.js";import"./ns-alert-popup.98b34a4a.js";import"./ns-avatar-image.d3cedf0f.js";import"./index.es.f7e98ba1.js";import"./vue-upload-component.9d9b1493.js";import"./vue.runtime.esm-bundler.4d73455d.js";import"./ns-pos-confirm-popup.6352ee90.js";import"./ns-notice.cd816d9e.js";import"./ns-media.56e6d45d.js";import"./ns-numpad.5d6ab815.js";import"./ns-numpad-plus.e24b727a.js";import"./ns-pos-loading-popup.136099e6.js";import"./ns-paginate.a2759a76.js";import"./ns-prompt-popup.b91e58a9.js";const q={data:()=>({form:new y,firstPartFields:[],secondPartFields:[],fields:[]}),methods:{validate(){if(this.form.validateFields(this.firstPartFields)&&this.form.validateFields(this.secondPartFields)){this.form.disableFields(this.firstPartFields),this.form.disableFields(this.secondPartFields),this.firstPartFields.forEach(s=>console.log(s)),this.secondPartFields.forEach(s=>console.log(s));const e={...this.form.getValue(this.firstPartFields),...this.form.getValue(this.secondPartFields)};this.checkDatabase(e).subscribe(s=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),w.push("/configuration"),nsSnackBar.success(s.message,"OKAY",{duration:5e3}).subscribe()},s=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),nsSnackBar.error(s.message,"OKAY").subscribe()})}},checkDatabase(e){return nsHttpClient.post("/api/nexopos/v4/setup/database",e)},sliceRange(e,i,s){const p=e.length,l=Math.ceil(p/i);return console.log(e),e.splice(s*l,l)}},mounted(){const e=this.form.createFields([{label:"Driver",description:"Set the database driver",name:"database_driver",value:"mysql",type:"select",options:[{label:"MySQL",value:"mysql"},{label:"Postgres",value:"pgsql"},{label:"SQLite",value:"sqlite"}],validation:"required"},{label:"Hostname",description:"Provide the database hostname",name:"hostname",value:"localhost"},{label:"Username",description:"Username required to connect to the database.",name:"username",value:"root"},{label:"Password",description:"The username password required to connect.",name:"password",value:""},{label:"Database Name",description:"Provide the database name. Leave empty to use default file for SQLite Driver.",name:"database_name",value:"nexopos_v4"},{label:"Database Prefix",description:"Provide the database prefix.",name:"database_prefix",value:"ns_",validation:"required"},{label:"Port",description:"Provide the hostname port.",name:"database_port",value:"3306",validation:"required"}]);this.firstPartFields=Object.values(this.sliceRange([...e],2,0)),this.secondPartFields=Object.values(this.sliceRange([...e],2,1))}},S={class:"bg-white rounded shadow my-4"},C={class:"welcome-box border-b border-gray-300 p-3 text-gray-700"},D={class:"md:-mx-4 md:flex"},$={class:"md:px-4 md:w-1/2 w-full"},B={class:"md:px-4 md:w-1/2 w-full"},V={class:"bg-gray-200 p-3 flex justify-end"};function L(e,i,s,p,l,_){const h=f("ns-field"),g=f("ns-button");return o(),d("div",S,[a("div",C,[a("div",D,[a("div",$,[(o(!0),d(u,null,b(e.firstPartFields,(t,n)=>(o(),v(h,{key:n,field:t,onChange:P=>e.form.validateField(t)},{default:m(()=>[a("span",null,r(t.label),1),F(e.$slots,"description",{},()=>[c(r(t.description),1)])]),_:2},1032,["field","onChange"]))),128))]),a("div",B,[(o(!0),d(u,null,b(e.secondPartFields,(t,n)=>(o(),v(h,{key:n,field:t,onChange:P=>e.form.validateField(t)},{default:m(()=>[a("span",null,r(t.label),1),F(e.$slots,"description",{},()=>[c(r(t.description),1)])]),_:2},1032,["field","onChange"]))),128))])])]),a("div",V,[k(g,{onClick:i[0]||(i[0]=t=>_.validate()),type:"info"},{default:m(()=>[c("Save Database")]),_:1})])])}var te=x(q,[["render",L]]);export{te as default};
