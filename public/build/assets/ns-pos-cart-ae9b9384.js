import{p as D,F as N,e as B,a as v,n as R,b as A,P as y}from"./bootstrap-4befc3ba.js";import{_ as d,n as j}from"./currency-47ec5b79.js";import{s as E}from"./pos-section-switch-0869c4e1.js";import{P as M}from"./product-quantity-44b15dc1.js";import{_ as g}from"./_plugin-vue_export-helper-c27b6911.js";import{a6 as n,z as l,A as o,ae as b,c as f,az as I,y as p,F as x,ac as C,x as S,ax as k,H as V,ag as U}from"./npm~@vue~runtime-core_-ff0bdc0c.js";import{U as r,z as O}from"./npm~@vue~shared_-82b01912.js";import{m as $,w as Y}from"./npm~@vue~runtime-dom_-a668b91e.js";import z from"./ns-pos-loading-popup-c5c20a52.js";import F from"./ns-pos-confirm-popup-47015db9.js";import{n as G}from"./ns-pos-order-type-popup-ddc0509f.js";import{n as W,a as L}from"./ns-pos-customer-select-popup-9a3a2fa2.js";import K from"./ns-pos-shipping-popup-600bf9bd.js";import{r as T,m as q}from"./npm~@vue~reactivity_-481192b6.js";import"./npm~@dicebear~avatars_-e73ed2cc.js";import"./npm~@dicebear~avatars-avataaars-sprites_-e47afe24.js";import"./npm~moment-fbc5633a.js";import"./ns-switch-91bfd2af.js";import"./npm~vue2-daterange-picker-f17f6b76.js";import"./npm~vuedraggable-90a90e9d.js";import"./npm~vue-upload-component-9e5d4563.js";import"./npm~lodash-f7a36ac5.js";import{n as J,a as X}from"./ns-numpad-plus-f3ffaa01.js";import{f as Z}from"./npm~rxjs-a7e91008.js";import"./npm~laravel-echo-7ac8f47a.js";import"./npm~pusher-js-7b18aad5.js";import"./npm~@ckeditor~ckeditor5-build-classic_-a8abd726.js";import"./npm~axios-4a70c6fc.js";import"./npm~chart.js-3fed1729.js";import"./npm~vue-6a0d7c4c.js";import"./npm~@vue~compiler-dom_-04241bb4.js";import"./npm~@vue~compiler-core_-2a2ce8c7.js";import"./npm~rx-1641e2f8.js";import"./npm~@wordpress~hooks_-18172e20.js";import"./npm~mathjs-1dff8408.js";import"./npm~@babel~runtime_-34ca84e8.js";import"./npm~decimal.js-d133ee8e.js";import"./npm~complex.js-15c479db.js";import"./npm~fraction.js-52b397f9.js";import"./npm~typed-function-e88d1f37.js";import"./npm~seedrandom-b246f2f9.js";import"./npm~javascript-natural-sort-11e7fc54.js";import"./npm~escape-latex-404addb9.js";import"./npm~tslib-f3101d7c.js";import"./npm~numeral-faf61dd1.js";import"./npm~currency.js-57f74176.js";import"./ns-paginate-881a9632.js";import"./ns-orders-preview-popup-1dc865af.js";import"./print-3c0412fa.js";import"./ns-prompt-popup-64b67141.js";import"./npm~pure-color-28f75675.js";import"./npm~svgson-a2b86d8a.js";import"./npm~omit-deep-3a616dcc.js";import"./npm~is-plain-object-01248184.js";import"./npm~isobject-2e03973b.js";import"./npm~isarray-980812a4.js";import"./npm~unset-value-cf896816.js";import"./npm~has-value-859045a0.js";import"./npm~has-values-79b61d1f.js";import"./npm~get-value-efae0488.js";import"./npm~deep-rename-keys-9802c842.js";import"./npm~kind-of-f578382b.js";import"./npm~is-buffer-793dba8c.js";import"./npm~rename-keys-8dab041c.js";import"./npm~xml-reader-1784d248.js";import"./npm~eventemitter3-c7e30f9c.js";import"./npm~xml-lexer-6516179a.js";import"./npm~@ckeditor~ckeditor5-vue_-b5744b68.js";import"./npm~sortablejs-9be29f79.js";const ee={props:["order"],methods:{__,async payOrder(){const e=nsHooks.applyFilters("ns-pay-queue",[ProductsQueue,CustomerQueue,TypeQueue,PaymentQueue]);for(let t in e)try{const a=await new e[t](this.order).run()}catch{return!1}}},mounted(){for(let e in nsShortcuts)["ns_pos_keyboard_payment"].includes(e)&&nsHotPress.create("ns_pos_keyboard_payment").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,t=>{t.preventDefault(),this.payOrder()})},unmounted(){nsHotPress.destroy("ns_pos_keyboard_payment")}},te=o("i",{class:"mr-2 text-2xl lg:text-xl las la-cash-register"},null,-1),se={class:"text-lg hidden md:inline lg:text-2xl"};function oe(e,t,c,a,u,s){return n(),l("div",{onClick:t[0]||(t[0]=i=>s.payOrder()),id:"pay-button",class:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-green-500 text-white hover:bg-green-600 border-r border-green-600 flex-auto"},[te,o("span",se,r(s.__("Pay")),1)])}const re=g(ee,[["render",oe]]),ne={name:"ns-pos-hold-orders",props:["popup"],data(){return{order:{},title:"",show:!0}},mounted(){this.popupCloser(),this.show=POS.getHoldPopupEnabled(),this.show||this.popup.params.resolve({title:this.title}),this.$refs.reference.focus(),this.$refs.reference.select(),this.order=this.popup.params.order,this.title=this.popup.params.order.title||""},methods:{__:d,nsCurrency:j,popupCloser:D,submitHold(){this.popup.close(),this.popup.params.resolve({title:this.title})}}},ie={class:"ns-box shadow-lg w-6/7-screen md:w-3/7-screen lg:w-2/6-screen"},le={class:"p-2 flex ns-box-header justify-between border-b items-center"},de={class:"font-semibold"},ae={class:"flex-auto ns-box-body"},ue={class:"border-b h-16 flex items-center justify-center"},ce={class:"text-5xl text-primary"},pe={class:"p-2"},_e={class:"input-group border-2 info"},he=["placeholder"],be={class:"p-2"},me={class:"text-secondary"},fe={class:"flex ns-box-footer"};function ye(e,t,c,a,u,s){const i=b("ns-close-button");return n(),l("div",ie,[o("div",le,[o("h3",de,r(s.__("Hold Order")),1),o("div",null,[f(i,{onClick:t[0]||(t[0]=_=>c.popup.close())})])]),o("div",ae,[o("div",ue,[o("span",ce,r(s.nsCurrency(u.order.total)),1)]),o("div",pe,[o("div",_e,[I(o("input",{onKeyup:t[1]||(t[1]=Y(_=>s.submitHold(),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=_=>u.title=_),ref:"reference",type:"text",placeholder:s.__("Order Reference"),class:"outline-none rounded border-2 p-2 w-full"},null,40,he),[[$,u.title]])])]),o("div",be,[o("p",me,r(s.__("The current order will be set on hold. You can retrieve this order from the pending order button. Providing a reference to it might help you to identify the order more quickly.")),1)])]),o("div",fe,[o("div",{onClick:t[3]||(t[3]=_=>s.submitHold()),class:"cursor-pointer w-1/2 py-3 flex justify-center items-center bg-green-500 text-white font-semibold"},r(s.__("Confirm")),1),o("div",{onClick:t[4]||(t[4]=_=>c.popup.close()),class:"cursor-pointer w-1/2 py-3 flex justify-center items-center bg-error-secondary text-white font-semibold"},r(s.__("Cancel")),1)])])}const ve=g(ne,[["render",ye]]),xe={props:["order"],methods:{__,async holdOrder(){if(this.order.payment_status!=="hold"&&this.order.payments.length>0)return nsSnackBar.error(__("Unable to hold an order which payment status has been updated already.")).subscribe();const e=nsHooks.applyFilters("ns-hold-queue",[ProductsQueue,CustomerQueue,TypeQueue]);for(let c in e)try{const u=await new e[c](this.order).run()}catch{return!1}nsHooks.applyFilters("ns-override-hold-popup",()=>{new Promise((a,u)=>{Popup.show(ve,{resolve:a,reject:u,order:this.order})}).then(a=>{this.order.title=a.title,this.order.payment_status="hold",POS.order.next(this.order);const u=Popup.show(z);POS.submitOrder().then(s=>{u.close(),nsSnackBar.success(s.message).subscribe()},s=>{u.close(),nsSnackBar.error(s.message).subscribe()})}).catch(a=>{console.log(a)})})()}},mounted(){for(let e in nsShortcuts)["ns_pos_keyboard_hold_order"].includes(e)&&nsHotPress.create("ns_pos_keyboard_hold_order").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,t=>{t.preventDefault(),this.holdOrder()})},unmounted(){nsHotPress.destroy("ns_pos_keyboard_hold_order")}},we=o("i",{class:"mr-2 text-2xl lg:text-xl las la-pause"},null,-1),ge={class:"text-lg hidden md:inline lg:text-2xl"};function Pe(e,t,c,a,u,s){return n(),l("div",{onClick:t[0]||(t[0]=i=>s.holdOrder()),id:"hold-button",class:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-blue-500 text-white border-r hover:bg-blue-600 border-blue-600 flex-auto"},[we,o("span",ge,r(s.__("Hold")),1)])}const ke=g(xe,[["render",Pe]]),Ce={name:"ns-pos-discount-popup",props:["popup"],data(){return{finalValue:1,virtualStock:null,popupSubscription:null,mode:"",type:"",allSelected:!0,isLoading:!1,keys:[...[7,8,9].map(e=>({identifier:e,value:e})),...[4,5,6].map(e=>({identifier:e,value:e})),...[1,2,3].map(e=>({identifier:e,value:e})),{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}]}},mounted(){this.mode=this.popup.params.reference.discount_type||"percentage",this.type=this.popup.params.type,this.mode==="percentage"?this.finalValue=this.popup.params.reference.discount_percentage||1:this.finalValue=this.popup.params.reference.discount||1},methods:{__:d,nsCurrency:j,setPercentageType(e){this.mode=e},closePopup(){this.popup.close()},inputValue(e){e.identifier==="next"?(this.popup.params.onSubmit({discount_type:this.mode,discount_percentage:this.mode==="percentage"?this.finalValue:void 0,discount:this.mode==="flat"?this.finalValue:void 0}),this.popup.close()):e.identifier==="backspace"?this.allSelected?(this.finalValue=0,this.allSelected=!1):(this.finalValue=this.finalValue.toString(),this.finalValue=this.finalValue.substr(0,this.finalValue.length-1)||0):this.allSelected?(this.finalValue=e.value,this.finalValue=parseFloat(this.finalValue),this.allSelected=!1):(this.finalValue+=""+e.value,this.finalValue=parseFloat(this.finalValue),this.mode==="percentage"&&(this.finalValue=this.finalValue>100?100:this.finalValue))}}},Se={id:"discount-popup",class:"ns-box shadow min-h-2/5-screen w-6/7-screen md:w-3/5-screen lg:w-3/5-screen xl:w-2/5-screen relative"},Te={class:"flex-shrink-0 flex justify-between items-center p-2 border-b ns-box-header"},Oe={key:0,class:"text-xl font-bold text-primary text-center"},Ve={key:1,class:"text-xl font-bold text-primary text-center"},je={id:"screen",class:"h-16 ns-box-body text-white flex items-center justify-center"},qe={class:"font-bold text-3xl"},De={key:0},Ne={key:1},Fe={id:"switch-mode",class:"flex"},Be=o("hr",{class:"border-r border-box-edge"},null,-1),He={id:"numpad",class:"grid grid-flow-row grid-cols-3 grid-rows-3"},Qe=["onClick"],Re={key:0};function Ae(e,t,c,a,u,s){const i=b("ns-close-button");return n(),l("div",Se,[o("div",Te,[o("div",null,[u.type==="product"?(n(),l("h1",Oe,r(s.__("Product Discount")),1)):p("",!0),u.type==="cart"?(n(),l("h1",Ve,r(s.__("Cart Discount")),1)):p("",!0)]),o("div",null,[f(i,{onClick:t[0]||(t[0]=_=>s.closePopup())})])]),o("div",je,[o("h1",qe,[u.mode==="flat"?(n(),l("span",De,r(s.nsCurrency(u.finalValue)),1)):p("",!0),u.mode==="percentage"?(n(),l("span",Ne,r(u.finalValue)+"%",1)):p("",!0)])]),o("div",Fe,[o("button",{onClick:t[1]||(t[1]=_=>s.setPercentageType("flat")),class:O([u.mode==="flat"?"bg-tab-active":"bg-tab-inactive text-tertiary","outline-none w-1/2 py-2 flex items-center justify-center"])},r(s.__("Flat")),3),Be,o("button",{onClick:t[2]||(t[2]=_=>s.setPercentageType("percentage")),class:O([u.mode==="percentage"?"bg-tab-active":"bg-tab-inactive text-tertiary","outline-none w-1/2 py-2 flex items-center justify-center"])},r(s.__("Percentage")),3)]),o("div",He,[(n(!0),l(x,null,C(u.keys,(_,m)=>(n(),l("div",{onClick:h=>s.inputValue(_),key:m,class:"text-primary ns-numpad-key info text-xl font-bold border h-24 flex items-center justify-center cursor-pointer"},[_.value!==void 0?(n(),l("span",Re,r(_.value),1)):p("",!0),_.icon?(n(),l("i",{key:1,class:O(["las",_.icon])},null,2)):p("",!0)],8,Qe))),128))])])}const H=g(Ce,[["render",Ae]]),Ee={props:["order","settings"],methods:{__,openDiscountPopup(e,t,c=null){if(!this.settings.products_discount&&t==="product")return nsSnackBar.error(__("You're not allowed to add a discount on the product.")).subscribe();if(!this.settings.cart_discount&&t==="cart")return nsSnackBar.error(__("You're not allowed to add a discount on the cart.")).subscribe();Popup.show(H,{reference:e,type:t,onSubmit(a){t==="product"?POS.updateProduct(e,a,c):t==="cart"&&POS.updateCart(e,a)}},{popupClass:"bg-white h:2/3 shadow-lg xl:w-1/4 lg:w-2/5 md:w-2/3 w-full"})}}},Me=o("i",{class:"mr-2 text-2xl lg:text-xl las la-percent"},null,-1),Ie={class:"text-lg hidden md:inline lg:text-2xl"};function Ue(e,t,c,a,u,s){return n(),l("div",{onClick:t[0]||(t[0]=i=>s.openDiscountPopup(c.order,"cart")),id:"discount-button",class:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center border-r border-box-edge flex-auto"},[Me,o("span",Ie,r(s.__("Discount")),1)])}const $e=g(Ee,[["render",Ue]]),Ye={props:["order","settings"],methods:{__,voidOngoingOrder(){POS.voidOrder(this.order)}}},ze=o("i",{class:"mr-2 text-2xl lg:text-xl las la-trash"},null,-1),Ge={class:"text-lg hidden md:inline lg:text-2xl"};function We(e,t,c,a,u,s){return n(),l("div",{onClick:t[0]||(t[0]=i=>s.voidOngoingOrder(c.order)),id:"void-button",class:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-red-500 text-white border-box-edge hover:bg-red-600 flex-auto"},[ze,o("span",Ge,r(s.__("Void")),1)])}const Le=g(Ye,[["render",We]]),Ke={name:"ns-pos-note-popup",props:["popup"],data(){return{validation:new N,fields:[{label:d("Note"),name:"note",value:"",description:d("More details about this order"),type:"textarea"},{label:d("Display On Receipt"),name:"note_visibility",value:"",options:[{label:d("Yes"),value:"visible"},{label:d("No"),value:"hidden"}],description:d("Will display the note on the receipt"),type:"switch"}]}},mounted(){this.popupCloser(),this.fields.forEach(e=>{e.name==="note"?e.value=this.popup.params.note:e.name==="note_visibility"&&(e.value=this.popup.params.note_visibility)})},methods:{__:d,popupResolver:B,popupCloser:D,closePopup(){this.popupResolver(!1)},saveNote(){if(!this.validation.validateFields(this.fields)){const e=this.validation.validateFieldsErrors(this.fields);return this.validation.triggerFieldsErrors(this.fields,e),this.$forceUpdate(),v.error(d("Unable to proceed the form is not valid.")).subscribe()}return this.popupResolver(this.validation.extractFields(this.fields))}}},Je={class:"shadow-lg ns-box w-95vw md:w-3/5-screen lg:w-2/5-screen"},Xe={class:"p-2 flex justify-between items-center border-b ns-box-header"},Ze={class:"font-bold"},et={class:"p-2"},tt={class:"p-2 flex justify-end border-t ns-box-footer"};function st(e,t,c,a,u,s){const i=b("ns-close-button"),_=b("ns-field"),m=b("ns-button");return n(),l("div",Je,[o("div",Xe,[o("h3",Ze,r(s.__("Order Note")),1),o("div",null,[f(i,{onClick:t[0]||(t[0]=h=>s.closePopup())})])]),o("div",et,[(n(!0),l(x,null,C(u.fields,(h,w)=>(n(),S(_,{key:w,field:h},null,8,["field"]))),128))]),o("div",tt,[f(m,{type:"info",onClick:t[1]||(t[1]=h=>s.saveNote())},{default:k(()=>[V(r(s.__("Save")),1)]),_:1})])])}const ot=g(Ke,[["render",st]]),rt={name:"ns-pos-tax-popup",props:["popup"],data(){return{validation:new N,tax_group:[],order:null,orderSubscriber:null,optionsSubscriber:null,options:{},tax_groups:[],activeTab:"",group_fields:[{label:d("Select Tax"),name:"tax_group_id",description:d("Define the tax that apply to the sale."),type:"select",disabled:!0,value:"",validation:"required",options:[]},{label:d("Type"),name:"tax_type",disabled:!0,value:"",description:d("Define how the tax is computed"),type:"select",validation:"required",options:[{label:d("Exclusive"),value:"exclusive"},{label:d("Inclusive"),value:"inclusive"}]}]}},mounted(){this.loadGroups(),this.popupCloser(),this.activeTab=this.popup.params.activeTab||"settings",this.group_fields.forEach(e=>{e.value=this.popup.params[e.name]||void 0}),this.orderSubscriber=POS.order.subscribe(e=>{this.order=e}),this.optionsSubscriber=POS.options.subscribe(e=>{this.options=e,["variable_vat","products_variable_vat"].includes(this.options.ns_pos_vat)&&this.group_fields.forEach(t=>t.disabled=!1)})},unmounted(){this.orderSubscriber.unsubscribe(),this.optionsSubscriber.unsubscribe()},methods:{__:d,nsCurrency:j,popupCloser:D,popupResolver:B,changeActive(e){this.activeTab=e},closePopup(){this.popupResolver(!1)},saveTax(){if(!this.validation.validateFields(this.group_fields))return v.error(d("Unable to proceed the form is not valid.")).subscribe();const e=this.validation.extractFields(this.group_fields);this.popupResolver(e)},loadGroups(){R.get("/api/taxes/groups").subscribe(e=>{this.groups=e,this.group_fields.forEach(t=>{t.name==="tax_group_id"&&(t.options=this.groups.map(c=>({label:c.name,value:c.id})))})})}}},nt={class:"ns-box shadow-lg w-95vw md:w-3/5-screen lg:w-2/5-screen"},it={class:"p-2 flex justify-between items-center border-b ns-box-header"},lt={class:"text-blog"},dt={class:"p-2 ns-box-body"},at={class:"p-2 border-b ns-box-body"},ut={class:"flex justify-end p-2"},ct={key:0,class:"p-2"},pt={key:0,class:"p-2 text-center text-primary"},_t={key:0,class:"p-2"},ht={class:"border shadow p-2 w-full flex justify-between items-center elevation-surface"};function bt(e,t,c,a,u,s){const i=b("ns-close-button"),_=b("ns-field"),m=b("ns-button"),h=b("ns-tabs-item"),w=b("ns-tabs");return n(),l("div",nt,[o("div",it,[o("h3",lt,r(s.__("Tax & Summary")),1),o("div",null,[f(i,{onClick:t[0]||(t[0]=P=>s.closePopup())})])]),o("div",dt,[f(w,{active:u.activeTab,onChangeTab:t[2]||(t[2]=P=>s.changeActive(P))},{default:k(()=>[f(h,{padding:"0",label:s.__("Settings"),identifier:"settings",active:!0},{default:k(()=>[o("div",at,[(n(!0),l(x,null,C(u.group_fields,(P,Q)=>(n(),S(_,{field:P,key:Q},null,8,["field"]))),128))]),o("div",ut,[f(m,{onClick:t[1]||(t[1]=P=>s.saveTax()),type:"info"},{default:k(()=>[V(r(s.__("Save")),1)]),_:1})])]),_:1},8,["label"]),f(h,{padding:"0",label:s.__("Summary"),identifier:"summary",active:!1},{default:k(()=>[u.order?(n(),l("div",ct,[(n(!0),l(x,null,C(u.order.taxes,P=>(n(),l("div",{key:P.id,class:"mb-2 border shadow p-2 w-full flex justify-between items-center elevation-surface"},[o("span",null,r(P.name),1),o("span",null,r(s.nsCurrency(P.tax_value)),1)]))),128)),u.order.taxes.length===0?(n(),l("div",pt,r(s.__("No tax is active")),1)):p("",!0)])):p("",!0)]),_:1},8,["label"]),f(h,{padding:"0",label:s.__("Product Taxes"),identifier:"product_taxes",active:!1},{default:k(()=>[u.order?(n(),l("div",_t,[o("div",ht,[o("span",null,r(s.__("Product Taxes")),1),o("span",null,r(s.nsCurrency(u.order.products_tax_value)),1)])])):p("",!0)]),_:1},8,["label"])]),_:1},8,["active"])])])}const mt=g(rt,[["render",bt]]),ft={name:"ns-pos-order-settings",props:["popup"],mounted(){nsHttpClient.get("/api/fields/ns.pos-order-settings").subscribe(e=>{e.forEach(t=>{t.value=this.popup.params.order[t.name]||""}),this.fields=this.validation.createFields(e)},e=>{}),this.popupCloser()},data(){return{fields:[],validation:new N}},methods:{__,popupCloser,popupResolver,closePopup(){this.popupResolver(!1)},saveSettings(){const e=this.validation.extractFields(this.fields);this.popupResolver(e)}}},yt={class:"shadow-lg flex flex-col ns-box w-95vw h-95vh md:w-3/5-screen md:h-3/5-screen lg:w-2/5-screen"},vt={class:"p-2 border-b ns-box-header items-center flex justify-between"},xt={class:"text-semibold"},wt={class:"p-2 flex-auto border-b ns-box-body overflow-y-auto"},gt={class:"p-2 flex justify-end ns-box-footer"};function Pt(e,t,c,a,u,s){const i=b("ns-close-button"),_=b("ns-field"),m=b("ns-button");return n(),l("div",yt,[o("div",vt,[o("h3",xt,r(s.__("Order Settings")),1),o("div",null,[f(i,{onClick:t[0]||(t[0]=h=>s.closePopup())})])]),o("div",wt,[(n(!0),l(x,null,C(u.fields,(h,w)=>(n(),S(_,{field:h,key:w},null,8,["field"]))),128))]),o("div",gt,[f(m,{onClick:t[1]||(t[1]=h=>s.saveSettings()),type:"info"},{default:k(()=>[V(r(s.__("Save")),1)]),_:1})])])}const kt=g(ft,[["render",Pt]]),Ct={name:"ns-pos-product-price-product",props:["popup"],components:{nsNumpad:J,nsNumpadPlus:X},computed:{},data(){return{product:{},optionsSubscription:null,options:{},price:0}},mounted(){this.popupCloser(),this.product=this.popup.params.product,this.optionsSubscription=POS.options.subscribe(e=>{this.options=T(e)})},beforeDestroy(){this.optionsSubscription.unsubscribe()},methods:{popupResolver,popupCloser,nsCurrency:j,__,updateProductPrice(e){this.product.unit_price=e},resolveProductPrice(e){this.popupResolver(this.product.unit_price)}}},St={class:"ns-box shadow-lg w-95vw md:w-3/5-screen lg:w-2/5-screen"},Tt={class:"popup-heading ns-box-header"},Ot={class:"flex flex-col ns-box-body"},Vt={class:"h-16 flex items-center justify-center elevation-surface info font-bold"},jt={class:"text-2xl"};function qt(e,t,c,a,u,s){const i=b("ns-close-button"),_=b("ns-numpad"),m=b("ns-numpad-plus");return n(),l("div",St,[o("div",Tt,[o("h3",null,r(s.__("Product Price")),1),o("div",null,[f(i,{onClick:t[0]||(t[0]=h=>s.popupResolver(!1))})])]),o("div",Ot,[o("div",Vt,[o("h2",jt,r(s.nsCurrency(u.product.unit_price)),1)]),u.options.ns_pos_numpad==="default"?(n(),S(_,{key:0,floating:u.options.ns_pos_allow_decimal_quantities,onChanged:t[1]||(t[1]=h=>s.updateProductPrice(h)),onNext:t[2]||(t[2]=h=>s.resolveProductPrice(h)),value:u.product.unit_price},null,8,["floating","value"])):p("",!0),u.options.ns_pos_numpad==="advanced"?(n(),S(m,{key:1,onChanged:t[3]||(t[3]=h=>s.updateProductPrice(h)),onNext:t[4]||(t[4]=h=>s.resolveProductPrice(h)),value:u.product.unit_price},null,8,["value"])):p("",!0)])])}const Dt=g(Ct,[["render",qt]]),Nt={name:"ns-pos-quick-product-popup",props:["popup"],methods:{__:d,popupCloser:D,popupResolver:B,close(){this.popupResolver(!1)},async addProduct(){const e=this.validation.extractFields(this.fields),t=this.fields.filter(s=>typeof s.show>"u"||typeof s.show=="function"&&s.show(e));if(!this.validation.validateFields(t))return v.error(d("Unable to proceed. The form is not valid.")).subscribe();let a=this.validation.extractFields(t);a.$original=()=>({stock_management:"disabled",category_id:0,tax_group:this.tax_groups.filter(s=>parseInt(s.id)===parseInt(a.tax_group_id))[0],tax_group_id:a.tax_group_id,tax_type:a.tax_type}),a.product_type==="product"?(a.unit_name=this.units.filter(s=>s.id===a.unit_id)[0].name,a.quantity=parseFloat(a.quantity),a.unit_price=parseFloat(a.unit_price),a.mode="custom",a.price_with_tax=a.unit_price,a.price_without_tax=a.unit_price,a.tax_value=0):(a.unit_name=d("N/A"),a.unit_price=0,a.quantity=1);const u=await POS.defineQuantities(a,this.units);a.$quantities=()=>u,a=POS.computeProductTax(a),POS.addToCart(a),this.close()},loadData(){this.loaded=!1,Z(nsHttpClient.get("/api/units"),nsHttpClient.get("/api/taxes/groups")).subscribe({next:e=>{this.units=e[0],this.tax_groups=e[1],this.fields.filter(t=>{t.name==="tax_group_id"&&(t.options=e[1].map(c=>({label:c.name,value:c.id})),e[1][0].id!==void 0&&(t.value=e[1][0].id||this.options.ns_pos_tax_group)),t.name==="tax_type"&&(t.value=this.options.tax_type||"inclusive"),t.name==="unit_id"&&(t.value=this.options.ns_pos_quick_product_default_unit,t.options=e[0].map(c=>({label:c.name,value:c.id})))}),this.buildForm()},error:e=>{}})},buildForm(){this.fields=this.validation.createFields(this.fields),this.loaded=!0,setTimeout(()=>{this.$popup.container.querySelector("#name").select()},100)}},computed:{form(){return this.validation.extractFields(this.fields)}},data(){return{units:[],options:POS.options.getValue(),tax_groups:[],loaded:!1,validation:new N,fields:[{label:d("Name"),name:"name",type:"text",description:d("Provide a unique name for the product."),validation:"required"},{label:d("Product Type"),name:"product_type",type:"select",description:d("Define the product type."),options:[{label:d("Normal"),value:"product"},{label:d("Dynamic"),value:"dynamic"}],value:"product",validation:"required"},{label:d("Rate"),name:"rate",type:"text",description:d("In case the product is computed based on a percentage, define the rate here."),validation:"required",show(e){return e.product_type==="dynamic"}},{label:d("Unit Price"),name:"unit_price",type:"text",description:d("Define what is the sale price of the item."),validation:"",value:0,show(e){return e.product_type==="product"}},{label:d("Quantity"),name:"quantity",type:"text",value:1,description:d("Set the quantity of the product."),validation:"",show(e){return e.product_type==="product"}},{label:d("Unit"),name:"unit_id",type:"select",options:[],description:d("Assign a unit to the product."),validation:"",show(e){return e.product_type==="product"}},{label:d("Tax Type"),name:"tax_type",type:"select",options:[{label:d("Disabled"),value:""},{label:d("Inclusive"),value:"inclusive"},{label:d("Exclusive"),value:"exclusive"}],description:d("Define what is tax type of the item."),show(e){return e.product_type==="product"}},{label:d("Tax Group"),name:"tax_group_id",type:"select",options:[],description:d("Choose the tax group that should apply to the item."),show(e){return e.product_type==="product"}}]}},mounted(){this.popupCloser(),this.loadData()}},Ft={class:"w-95vw flex flex-col h-95vh shadow-lg md:w-3/5-screen lg:w-2/5-screen md:h-3/5-screen ns-box"},Bt={class:"header ns-box-header border-b flex justify-between p-2 items-center"},Ht={class:"ns-box-body p-2 flex-auto overflow-y-auto"},Qt={key:0,class:"h-full w-full flex justify-center items-center"},Rt={class:"ns-box-footer border-t flex justify-between p-2"},At=o("div",null,null,-1);function Et(e,t,c,a,u,s){const i=b("ns-close-button"),_=b("ns-spinner"),m=b("ns-field"),h=b("ns-button");return n(),l("div",Ft,[o("div",Bt,[o("h3",null,r(s.__("Product / Service")),1),o("div",null,[f(i,{onClick:t[0]||(t[0]=w=>s.close())})])]),o("div",Ht,[u.loaded?p("",!0):(n(),l("div",Qt,[f(_)])),u.loaded?(n(!0),l(x,{key:1},C(u.fields,(w,P)=>(n(),l(x,null,[w.show&&w.show(s.form)||!w.show?(n(),S(m,{key:P,field:w},null,8,["field"])):p("",!0)],64))),256)):p("",!0)]),o("div",Rt,[At,o("div",null,[f(h,{onClick:t[1]||(t[1]=w=>s.addProduct()),type:"info"},{default:k(()=>[V(r(s.__("Create")),1)]),_:1})])])])}const Mt=g(Nt,[["render",Et]]),It={name:"ns-pos-cart",data:()=>({popup:null,cartButtons:{},products:[],defaultCartButtons:{nsPosPayButton:q(re),nsPosHoldButton:q(ke),nsPosDiscountButton:q($e),nsPosVoidButton:q(Le)},visibleSection:null,visibleSectionSubscriber:null,cartButtonsSubscriber:null,optionsSubscriber:null,options:{},typeSubscribe:null,orderSubscribe:null,productSubscribe:null,settingsSubscribe:null,settings:{},types:[],order:T({})}),computed:{selectedType(){return this.order.type?this.order.type.label:"N/A"},isVisible(){return this.visibleSection==="cart"},customerName(){return this.order.customer?this.order.customer.first_name:"N/A"},couponName(){return d("Apply Coupon")}},mounted(){this.cartButtonsSubscriber=POS.cartButtons.subscribe(e=>{this.cartButtons=e}),this.optionsSubscriber=POS.options.subscribe(e=>{this.options=e}),this.typeSubscribe=POS.types.subscribe(e=>this.types=e),this.orderSubscribe=POS.order.subscribe(e=>{this.order=T(e)}),this.productSubscribe=POS.products.subscribe(e=>{this.products=T(e)}),this.settingsSubscribe=POS.settings.subscribe(e=>{this.settings=T(e)}),this.visibleSectionSubscriber=POS.visibleSection.subscribe(e=>{this.visibleSection=T(e)}),A.addAction("ns-after-cart-reset","ns-pos-cart-buttons",()=>{POS.cartButtons.next(this.defaultCartButtons)});for(let e in nsShortcuts)["ns_pos_keyboard_shipping"].includes(e)&&nsHotPress.create("ns_pos_keyboard_shipping").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,t=>{t.preventDefault(),this.openShippingPopup()}),["ns_pos_keyboard_note"].includes(e)&&nsHotPress.create("ns_pos_keyboard_note").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,t=>{t.preventDefault(),this.openNotePopup()})},unmounted(){this.visibleSectionSubscriber.unsubscribe(),this.typeSubscribe.unsubscribe(),this.orderSubscribe.unsubscribe(),this.productSubscribe.unsubscribe(),this.settingsSubscribe.unsubscribe(),this.optionsSubscriber.unsubscribe(),this.cartButtonsSubscriber.unsubscribe(),nsHotPress.destroy("ns_pos_keyboard_shipping"),nsHotPress.destroy("ns_pos_keyboard_note")},methods:{__:d,nsCurrency:j,switchTo:E,openAddQuickProduct(){new Promise((t,c)=>{y.show(Mt,{resolve:t,reject:c})}).then(t=>{}).catch(t=>{})},summarizeCoupons(){const e=this.order.coupons.map(t=>t.value);return e.length>0?e.reduce((t,c)=>t+c):0},async changeProductPrice(e){if(!this.settings.edit_purchase_price)return v.error(d("You don't have the right to edit the purchase price.")).subscribe();if(e.product_type==="dynamic")return v.error(d("Dynamic product can't have their price updated.")).subscribe();if(this.settings.unit_price_editable)try{const t=await new Promise((a,u)=>y.show(Dt,{product:Object.assign({},e),resolve:a,reject:u})),c={...e.$quantities(),custom_price_edit:t};return e.$quantities=()=>c,e.mode="custom",e=POS.computeProductTax(e),POS.recomputeProducts(POS.products.getValue()),POS.refreshCart(),v.success(d("The product price has been updated.")).subscribe()}catch(t){if(t!==!1)throw v.error(t).subscribe(),t}else return v.error(d("The editable price feature is disabled.")).subscribe()},async selectCoupon(){try{const e=await new Promise((t,c)=>{y.show(W,{resolve:t,reject:c})})}catch{}},async defineOrderSettings(){if(!this.settings.edit_settings)return v.error(d("You're not allowed to edit the order settings.")).subscribe();try{const e=await new Promise((t,c)=>{y.show(kt,{resolve:t,reject:c,order:this.order})});POS.order.next({...this.order,...e})}catch{}},async openNotePopup(){try{const e=await new Promise((c,a)=>{const u=this.order.note,s=this.order.note_visibility;y.show(ot,{resolve:c,reject:a,note:u,note_visibility:s})}),t={...this.order,...e};POS.order.next(t)}catch(e){e!==!1&&v.error(e.message).subscribe()}},async selectTaxGroup(e="settings"){try{const t=await new Promise((a,u)=>{const s=this.order.taxes,i=this.order.tax_group_id,_=this.order.tax_type;y.show(mt,{resolve:a,reject:u,taxes:s,tax_group_id:i,tax_type:_,activeTab:e})}),c={...this.order,...t};POS.order.next(c),POS.refreshCart()}catch{}},openTaxSummary(){this.selectTaxGroup("summary")},selectCustomer(){y.show(L)},openDiscountPopup(e,t){if(!this.settings.products_discount&&t==="product")return v.error(d("You're not allowed to add a discount on the product.")).subscribe();if(!this.settings.cart_discount&&t==="cart")return v.error(d("You're not allowed to add a discount on the cart.")).subscribe();y.show(H,{reference:e,type:t,onSubmit(c){t==="product"?POS.updateProduct(e,c):t==="cart"&&POS.updateCart(e,c)}},{popupClass:"bg-white h:2/3 shadow-lg xl:w-1/4 lg:w-2/5 md:w-2/3 w-full"})},toggleMode(e,t){if(!this.options.ns_pos_allow_wholesale_price)return v.error(d("Unable to change the price mode. This feature has been disabled.")).subscribe();e.mode==="normal"?y.show(F,{title:d("Enable WholeSale Price"),message:d("Would you like to switch to wholesale price ?"),onAction(c){c&&POS.updateProduct(e,{mode:"wholesale"},t)}}):y.show(F,{title:d("Enable Normal Price"),message:d("Would you like to switch to normal price ?"),onAction(c){c&&POS.updateProduct(e,{mode:"normal"},t)}})},remove(e){y.show(F,{title:d("Confirm Your Action"),message:d("Would you like to delete this product ?"),onAction(t){t&&POS.removeProduct(e)}})},allowQuantityModification(e){return e.product_type==="product"},changeQuantity(e,t){this.allowQuantityModification(e)&&new M(e).run({unit_quantity_id:e.unit_quantity_id,unit_name:e.unit_name,$quantities:e.$quantities}).then(a=>{POS.updateProduct(e,a,t)})},openOrderType(){y.show(G)},openShippingPopup(){y.show(K)}}},Ut={id:"pos-cart",class:"flex-auto flex flex-col"},$t={key:0,id:"tools",class:"flex pl-2 ns-tab"},Yt={key:0,class:"flex items-center justify-center text-sm rounded-full h-6 w-6 bg-green-500 text-white ml-1"},zt={class:"rounded shadow ns-tab-item flex-auto flex overflow-hidden"},Gt={class:"cart-table flex flex-auto flex-col overflow-hidden"},Wt={id:"cart-toolbox",class:"w-full p-2 border-b"},Lt={class:"border rounded overflow-hidden"},Kt={class:"flex flex-wrap"},Jt={class:"ns-button"},Xt=o("i",{class:"las la-comment"},null,-1),Zt={class:"ml-1 hidden md:inline-block"},es=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),ts={class:"ns-button"},ss=o("i",{class:"las la-balance-scale-left"},null,-1),os={class:"ml-1 hidden md:inline-block"},rs={key:0,class:"ml-1 rounded-full flex items-center justify-center h-6 w-6 bg-info-secondary text-white"},ns=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),is={class:"ns-button"},ls=o("i",{class:"las la-tags"},null,-1),ds={class:"ml-1 hidden md:inline-block"},as={key:0,class:"ml-1 rounded-full flex items-center justify-center h-6 w-6 bg-info-secondary text-white"},us=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),cs={class:"ns-button"},ps=o("i",{class:"las la-tools"},null,-1),_s={class:"ml-1 hidden md:inline-block"},hs=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),bs={key:0,class:"ns-button"},ms=o("i",{class:"las la-plus"},null,-1),fs={class:"ml-1 hidden md:inline-block"},ys=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),vs={id:"cart-table-header",class:"w-full text-primary font-semibold flex"},xs={class:"w-full lg:w-4/6 p-2 border border-l-0 border-t-0"},ws={class:"hidden lg:flex lg:w-1/6 p-2 border-b border-t-0"},gs={class:"hidden lg:flex lg:w-1/6 p-2 border border-r-0 border-t-0"},Ps={id:"cart-products-table",class:"flex flex-auto flex-col overflow-auto"},ks={key:0,class:"text-primary flex"},Cs={class:"w-full text-center py-4 border-b"},Ss=["product-index"],Ts={class:"w-full lg:w-4/6 p-2 border border-l-0 border-t-0"},Os={class:"flex justify-between product-details mb-1"},Vs={class:"font-semibold"},js={class:"-mx-1 flex product-options"},qs={class:"px-1"},Ds=["onClick"],Ns=o("i",{class:"las la-trash text-xl"},null,-1),Fs=[Ns],Bs={key:0,class:"px-1"},Hs=["onClick"],Qs=o("i",{class:"las la-award text-xl"},null,-1),Rs=[Qs],As={class:"flex justify-between product-controls"},Es={class:"-mx-1 flex flex-wrap"},Ms={class:"px-1 w-1/2 md:w-auto mb-1"},Is=["onClick"],Us={class:"px-1 w-1/2 md:w-auto mb-1"},$s=["onClick"],Ys={key:0},zs={class:"px-1 w-1/2 md:w-auto mb-1 lg:hidden"},Gs=["onClick"],Ws={class:"px-1 w-1/2 md:w-auto mb-1 lg:hidden"},Ls={class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},Ks=["onClick"],Js={key:0,class:"border-b border-dashed border-info-primary p-2"},Xs={class:"hidden lg:flex w-1/6 p-2 border border-r-0 border-t-0 items-center justify-center"},Zs={id:"cart-products-summary",class:"flex"},eo={key:0,class:"table ns-table w-full text-sm"},to={width:"200",class:"border p-2"},so={width:"200",class:"border p-2"},oo={width:"200",class:"border p-2 text-right"},ro={key:0},no=o("td",{width:"200",class:"border p-2"},null,-1),io={width:"200",class:"border p-2"},lo={width:"200",class:"border p-2 text-right"},ao={width:"200",class:"border p-2"},uo={width:"200",class:"border p-2"},co={key:0},po={key:1},_o={width:"200",class:"border p-2 text-right"},ho={key:1},bo=o("td",{width:"200",class:"border p-2"},null,-1),mo={width:"200",class:"border p-2"},fo={width:"200",class:"border p-2 text-right"},yo={class:"success"},vo={width:"200",class:"border p-2"},xo={width:"200",class:"border p-2"},wo={width:"200",class:"border p-2 text-right"},go={key:1,class:"table ns-table w-full text-sm"},Po={width:"200",class:"border p-2"},ko={width:"200",class:"border p-2"},Co={class:"flex justify-between"},So={key:0},To=o("td",{width:"200",class:"border p-2"},null,-1),Oo={width:"200",class:"border p-2"},Vo={width:"200",class:"border p-2 text-right"},jo={width:"200",class:"border p-2"},qo={width:"200",class:"border p-2"},Do={class:"flex justify-between items-center"},No={key:0},Fo={key:1},Bo={key:1},Ho=o("td",{width:"200",class:"border p-2"},null,-1),Qo={width:"200",class:"border p-2"},Ro=o("span",null,null,-1),Ao={class:"success"},Eo={width:"200",class:"border p-2"},Mo={width:"200",class:"border p-2"},Io={class:"flex justify-between w-full"},Uo={class:"h-16 flex flex-shrink-0 border-t border-box-edge",id:"cart-bottom-buttons"};function $o(e,t,c,a,u,s){return n(),l("div",Ut,[e.visibleSection==="cart"?(n(),l("div",$t,[o("div",{onClick:t[0]||(t[0]=i=>s.switchTo("cart")),class:"flex cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 font-semibold active tab"},[o("span",null,r(s.__("Cart")),1),e.order?(n(),l("span",Yt,r(e.order.products.length),1)):p("",!0)]),o("div",{onClick:t[1]||(t[1]=i=>s.switchTo("grid")),class:"cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 border-t border-r border-l inactive tab"},r(s.__("Products")),1)])):p("",!0),o("div",zt,[o("div",Gt,[o("div",Wt,[o("div",Lt,[o("div",Kt,[o("div",Jt,[o("button",{onClick:t[2]||(t[2]=i=>s.openNotePopup()),class:"w-full h-10 px-3 outline-none"},[Xt,o("span",Zt,r(s.__("Comments")),1)])]),es,o("div",ts,[o("button",{onClick:t[3]||(t[3]=i=>s.selectTaxGroup()),class:"w-full h-10 px-3 outline-none flex items-center"},[ss,o("span",os,r(s.__("Taxes")),1),e.order.taxes&&e.order.taxes.length>0?(n(),l("span",rs,r(e.order.taxes.length),1)):p("",!0)])]),ns,o("div",is,[o("button",{onClick:t[4]||(t[4]=i=>s.selectCoupon()),class:"w-full h-10 px-3 outline-none flex items-center"},[ls,o("span",ds,r(s.__("Coupons")),1),e.order.coupons&&e.order.coupons.length>0?(n(),l("span",as,r(e.order.coupons.length),1)):p("",!0)])]),us,o("div",cs,[o("button",{onClick:t[5]||(t[5]=i=>s.defineOrderSettings()),class:"w-full h-10 px-3 outline-none flex items-center"},[ps,o("span",_s,r(s.__("Settings")),1)])]),hs,e.options.ns_pos_quick_product==="yes"?(n(),l("div",bs,[o("button",{onClick:t[6]||(t[6]=i=>s.openAddQuickProduct()),class:"w-full h-10 px-3 outline-none flex items-center"},[ms,o("span",fs,r(s.__("Product")),1)])])):p("",!0),ys])])]),o("div",vs,[o("div",xs,r(s.__("Product")),1),o("div",ws,r(s.__("Quantity")),1),o("div",gs,r(s.__("Total")),1)]),o("div",Ps,[e.products.length===0?(n(),l("div",ks,[o("div",Cs,[o("h3",null,r(s.__("No products added...")),1)])])):p("",!0),(n(!0),l(x,null,C(e.products,(i,_)=>(n(),l("div",{"product-index":_,key:i.barcode,class:"product-item flex"},[o("div",Ts,[o("div",Os,[o("h3",Vs,r(i.name)+" — "+r(i.unit_name),1),o("div",js,[o("div",qs,[o("a",{onClick:m=>s.remove(i),class:"hover:text-error-secondary cursor-pointer outline-none border-dashed py-1 border-b border-error-secondary text-sm"},Fs,8,Ds)]),e.options.ns_pos_allow_wholesale_price&&s.allowQuantityModification(i)?(n(),l("div",Bs,[o("a",{class:O([i.mode==="wholesale"?"text-success-secondary border-success-secondary":"border-info-primary","cursor-pointer outline-none border-dashed py-1 border-b text-sm"]),onClick:m=>s.toggleMode(i,_)},Rs,10,Hs)])):p("",!0)])]),o("div",As,[o("div",Es,[o("div",Ms,[o("a",{onClick:m=>s.changeProductPrice(i),class:O([i.mode==="wholesale"?"text-success-secondary hover:text-success-secondary border-success-secondary":"border-info-primary","cursor-pointer outline-none border-dashed py-1 border-b text-sm"])},r(s.__("Price"))+" : "+r(s.nsCurrency(i.unit_price)),11,Is)]),o("div",Us,[s.allowQuantityModification(i)?(n(),l("a",{key:0,onClick:m=>s.openDiscountPopup(i,"product",_),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},[V(r(s.__("Discount"))+" ",1),i.discount_type==="percentage"?(n(),l("span",Ys,r(i.discount_percentage)+"%",1)):p("",!0),V(" : "+r(s.nsCurrency(i.discount)),1)],8,$s)):p("",!0)]),o("div",zs,[s.allowQuantityModification(i)?(n(),l("a",{key:0,onClick:m=>s.changeQuantity(i,_),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Quantity"))+": "+r(i.quantity),9,Gs)):p("",!0)]),o("div",Ws,[o("span",Ls,r(s.__("Total :"))+" "+r(s.nsCurrency(i.total_price)),1)])])])]),o("div",{onClick:m=>s.changeQuantity(i,_),class:O([s.allowQuantityModification(i)?"cursor-pointer ns-numpad-key":"","hidden lg:flex w-1/6 p-2 border-b items-center justify-center"])},[s.allowQuantityModification(i)?(n(),l("span",Js,r(i.quantity),1)):p("",!0)],10,Ks),o("div",Xs,r(s.nsCurrency(i.total_price)),1)],8,Ss))),128))]),o("div",Zs,[e.visibleSection==="both"?(n(),l("table",eo,[o("tr",null,[o("td",to,[o("a",{onClick:t[7]||(t[7]=i=>s.selectCustomer()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Customer"))+": "+r(s.customerName),1)]),o("td",so,r(s.__("Sub Total")),1),o("td",oo,r(s.nsCurrency(e.order.subtotal)),1)]),e.order.coupons.length>0?(n(),l("tr",ro,[no,o("td",io,[o("a",{onClick:t[8]||(t[8]=i=>s.selectCoupon()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Coupons")),1)]),o("td",lo,r(s.nsCurrency(s.summarizeCoupons())),1)])):p("",!0),o("tr",null,[o("td",ao,[o("a",{onClick:t[9]||(t[9]=i=>s.openOrderType()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Type"))+": "+r(s.selectedType),1)]),o("td",uo,[o("span",null,r(s.__("Discount")),1),e.order.discount_type==="percentage"?(n(),l("span",co,"("+r(e.order.discount_percentage)+"%)",1)):p("",!0),e.order.discount_type==="flat"?(n(),l("span",po,"("+r(s.__("Flat"))+")",1)):p("",!0)]),o("td",_o,[o("a",{onClick:t[10]||(t[10]=i=>s.openDiscountPopup(e.order,"cart")),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.nsCurrency(e.order.discount)),1)])]),e.order.type&&e.order.type.identifier==="delivery"?(n(),l("tr",ho,[bo,o("td",mo,[o("a",{onClick:t[11]||(t[11]=i=>s.openShippingPopup()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Shipping")),1)]),o("td",fo,r(s.nsCurrency(e.order.shipping)),1)])):p("",!0),o("tr",yo,[o("td",vo,[e.order&&e.options.ns_pos_tax_type==="exclusive"?(n(),l(x,{key:0},[e.options.ns_pos_price_with_tax==="yes"?(n(),l("a",{key:0,onClick:t[12]||(t[12]=i=>s.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Tax Included"))+": "+r(s.nsCurrency(e.order.total_tax_value+e.order.products_tax_value)),1)):e.options.ns_pos_price_with_tax==="no"?(n(),l("a",{key:1,onClick:t[13]||(t[13]=i=>s.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Tax"))+": "+r(s.nsCurrency(e.order.total_tax_value)),1)):p("",!0)],64)):e.order&&e.options.ns_pos_tax_type==="inclusive"?(n(),l(x,{key:1},[e.options.ns_pos_price_with_tax==="yes"?(n(),l("a",{key:0,onClick:t[14]||(t[14]=i=>s.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Tax Included"))+": "+r(s.nsCurrency(e.order.total_tax_value+(e.order.products_exclusive_tax_value+e.order.products_inclusive_tax_value))),1)):e.options.ns_pos_price_with_tax==="no"?(n(),l("a",{key:1,onClick:t[15]||(t[15]=i=>s.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Tax"))+": "+r(s.nsCurrency(e.order.total_tax_value)),1)):p("",!0)],64)):p("",!0)]),o("td",xo,r(s.__("Total")),1),o("td",wo,r(s.nsCurrency(e.order.total)),1)])])):p("",!0),e.visibleSection==="cart"?(n(),l("table",go,[o("tr",null,[o("td",Po,[o("a",{onClick:t[16]||(t[16]=i=>s.selectCustomer()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Customer"))+": "+r(s.customerName),1)]),o("td",ko,[o("div",Co,[o("span",null,r(s.__("Sub Total")),1),o("span",null,r(s.nsCurrency(e.order.subtotal)),1)])])]),e.order.coupons.length>0?(n(),l("tr",So,[To,o("td",Oo,[o("a",{onClick:t[17]||(t[17]=i=>s.selectCoupon()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Coupons")),1)]),o("td",Vo,r(s.nsCurrency(s.summarizeCoupons())),1)])):p("",!0),o("tr",null,[o("td",jo,[o("a",{onClick:t[18]||(t[18]=i=>s.openOrderType()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Type"))+": "+r(s.selectedType),1)]),o("td",qo,[o("div",Do,[o("p",null,[o("span",null,r(s.__("Discount")),1),e.order.discount_type==="percentage"?(n(),l("span",No,"("+r(e.order.discount_percentage)+"%)",1)):p("",!0),e.order.discount_type==="flat"?(n(),l("span",Fo,"("+r(s.__("Flat"))+")",1)):p("",!0)]),o("a",{onClick:t[19]||(t[19]=i=>s.openDiscountPopup(e.order,"cart")),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.nsCurrency(e.order.discount)),1)])])]),e.order.type&&e.order.type.identifier==="delivery"?(n(),l("tr",Bo,[Ho,o("td",Qo,[o("a",{onClick:t[20]||(t[20]=i=>s.openShippingPopup()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Shipping")),1),Ro])])):p("",!0),o("tr",Ao,[o("td",Eo,[e.order&&e.options.ns_pos_tax_type==="exclusive"?(n(),l(x,{key:0},[e.options.ns_pos_price_with_tax==="yes"?(n(),l("a",{key:0,onClick:t[21]||(t[21]=i=>s.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Tax"))+": "+r(s.nsCurrency(e.order.total_tax_value)),1)):e.options.ns_pos_price_with_tax==="no"?(n(),l("a",{key:1,onClick:t[22]||(t[22]=i=>s.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Tax Inclusive"))+": "+r(s.nsCurrency(e.order.total_tax_value+e.order.products_tax_value)),1)):p("",!0)],64)):e.order&&e.options.ns_pos_tax_type==="inclusive"?(n(),l(x,{key:1},[e.options.ns_pos_price_with_tax==="yes"?(n(),l("a",{key:0,onClick:t[23]||(t[23]=i=>s.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Tax Included"))+": "+r(s.nsCurrency(e.order.total_tax_value)),1)):e.options.ns_pos_price_with_tax==="no"?(n(),l("a",{key:1,onClick:t[24]||(t[24]=i=>s.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(s.__("Tax Included"))+": "+r(s.nsCurrency(e.order.total_tax_value+e.order.products_tax_value)),1)):p("",!0)],64)):p("",!0)]),o("td",Mo,[o("div",Io,[o("span",null,r(s.__("Total")),1),o("span",null,r(s.nsCurrency(e.order.total)),1)])])])])):p("",!0)]),o("div",Uo,[(n(!0),l(x,null,C(e.cartButtons,i=>(n(),S(U(i),{order:e.order,settings:e.settings},null,8,["order","settings"]))),256))])])])])}const ln=g(It,[["render",$o]]);export{ln as default};
