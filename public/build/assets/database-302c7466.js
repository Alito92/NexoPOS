import{F as y}from"./bootstrap-32fd8995.js";import{n as w}from"./setup-67175f23.js";import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";import{r as u,o,c as d,a,F as f,b,g as v,w as c,t as r,x as F,h as m,f as k}from"./runtime-core.esm-bundler-a9e64527.js";import"./lang-643e0c49.js";import"./runtime-dom.esm-bundler-eae6104b.js";import"./preload-helper-41c905a7.js";import"./components-408e163a.js";import"./ns-alert-popup-187fdda5.js";import"./ns-avatar-image-51d4792c.js";import"./index.es-a0f39e76.js";import"./vue-upload-component-37fc7a3b.js";import"./vue.runtime.esm-bundler-1bae6fe8.js";import"./ns-pos-confirm-popup-16fa8fc0.js";import"./ns-notice-a19ab992.js";import"./ns-media-837a9b75.js";import"./ns-numpad-01515d62.js";import"./ns-numpad-plus-3c3360f4.js";import"./ns-pos-loading-popup-83ab0254.js";import"./ns-paginate-7d660ea5.js";import"./ns-prompt-popup-fd8a595f.js";import"./vue-router-99b264f5.js";const q={data:()=>({form:new y,firstPartFields:[],secondPartFields:[],fields:[]}),methods:{validate(){if(this.form.validateFields(this.firstPartFields)&&this.form.validateFields(this.secondPartFields)){this.form.disableFields(this.firstPartFields),this.form.disableFields(this.secondPartFields),this.firstPartFields.forEach(t=>console.log(t)),this.secondPartFields.forEach(t=>console.log(t));const e={...this.form.getValue(this.firstPartFields),...this.form.getValue(this.secondPartFields)};this.checkDatabase(e).subscribe(t=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),w.push("/configuration"),nsSnackBar.success(t.message,"OKAY",{duration:5e3}).subscribe()},t=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),nsSnackBar.error(t.message,"OKAY").subscribe()})}},checkDatabase(e){return nsHttpClient.post("/api/setup/database",e)},sliceRange(e,i,t){const p=e.length,l=Math.ceil(p/i);return console.log(e),e.splice(t*l,l)}},mounted(){const e=this.form.createFields([{label:"Driver",description:"Set the database driver",name:"database_driver",value:"mysql",type:"select",options:[{label:"MySQL",value:"mysql"},{label:"Postgres",value:"pgsql"},{label:"SQLite",value:"sqlite"}],validation:"required"},{label:"Hostname",description:"Provide the database hostname",name:"hostname",value:"localhost"},{label:"Username",description:"Username required to connect to the database.",name:"username",value:"root"},{label:"Password",description:"The username password required to connect.",name:"password",value:""},{label:"Database Name",description:"Provide the database name. Leave empty to use default file for SQLite Driver.",name:"database_name",value:"nexopos_v4"},{label:"Database Prefix",description:"Provide the database prefix.",name:"database_prefix",value:"ns_",validation:"required"},{label:"Port",description:"Provide the hostname port.",name:"database_port",value:"3306",validation:"required"}]);this.firstPartFields=Object.values(this.sliceRange([...e],2,0)),this.secondPartFields=Object.values(this.sliceRange([...e],2,1))}},S={class:"bg-white rounded shadow my-4"},C={class:"welcome-box border-b border-gray-300 p-3 text-gray-700"},D={class:"md:-mx-4 md:flex"},$={class:"md:px-4 md:w-1/2 w-full"},B={class:"md:px-4 md:w-1/2 w-full"},V={class:"bg-gray-200 p-3 flex justify-end"};function L(e,i,t,p,l,_){const h=u("ns-field"),g=u("ns-button");return o(),d("div",S,[a("div",C,[a("div",D,[a("div",$,[(o(!0),d(f,null,b(e.firstPartFields,(s,n)=>(o(),v(h,{key:n,field:s,onChange:P=>e.form.validateField(s)},{default:c(()=>[a("span",null,r(s.label),1),F(e.$slots,"description",{},()=>[m(r(s.description),1)])]),_:2},1032,["field","onChange"]))),128))]),a("div",B,[(o(!0),d(f,null,b(e.secondPartFields,(s,n)=>(o(),v(h,{key:n,field:s,onChange:P=>e.form.validateField(s)},{default:c(()=>[a("span",null,r(s.label),1),F(e.$slots,"description",{},()=>[m(r(s.description),1)])]),_:2},1032,["field","onChange"]))),128))])])]),a("div",V,[k(g,{onClick:i[0]||(i[0]=s=>_.validate()),type:"info"},{default:c(()=>[m("Save Database")]),_:1})])])}const se=x(q,[["render",L]]);export{se as default};
