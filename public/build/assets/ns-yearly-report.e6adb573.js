import{y as o,m as s,p as r}from"./bootstrap.4fc50695.js";import{e as i,f as p}from"./components.e6ff6fc8.js";import{b as n}from"./ns-notice.3d1887a3.js";import m from"./ns-pos-confirm-popup.04ed5413.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./ns-numpad-plus.89338cd1.js";import"./ns-paginate.01fa3ad3.js";import"./ns-prompt-popup.38fbac9c.js";import"./ns-alert-popup.e97ff427.js";import"./ns-pos-loading-popup.c4bd0a89.js";const g={name:"ns-yearly-report",mounted(){this.timezone!==""&&(this.year=ns.date.getMoment().format("Y"),this.loadReport())},components:{nsDatepicker:i,nsNotice:n,nsDateTimePicker:p},data(){return{startDate:o(),endDate:o(),report:{},timezone:ns.date.timeZone,year:"",labels:["month_paid_orders","month_taxes","month_expenses","month_income"]}},computed:{totalDebit(){return 0},totalCredit(){return 0}},methods:{setStartDate(e){this.startDate=e.format()},setEndDate(e){this.endDate=e.format()},printSaleReport(){this.$htmlToPaper("annual-report")},sumOf(e){return Object.values(this.report).length>0?Object.values(this.report).map(t=>parseFloat(t[e])||0).reduce((t,a)=>t+a):0},recomputeForSpecificYear(){Popup.show(m,{title:__("Would you like to proceed ?"),message:__("The report will be computed for the current year, a job will be dispatched and you'll be informed once it's completed."),onAction:e=>{e&&s.post("/api/nexopos/v4/reports/compute/yearly",{year:this.year}).subscribe(t=>{r.success(t.message).subscribe()},t=>{r.success(t.message||__("An unexpected error has occured.")).subscribe()})}})},getReportForMonth(e){return console.log(this.report,e),this.report[e]},loadReport(){const e=this.year;s.post("/api/nexopos/v4/reports/annual-report",{year:e}).subscribe(t=>{this.report=t},t=>{r.error(t.message).subscribe()})}}};export{g as default};
