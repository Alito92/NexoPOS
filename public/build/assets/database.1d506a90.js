import{F as y}from"./bootstrap.1adf5f09.js";import{n as w}from"./setup.9c099801.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import{b8 as u,b1 as o,aB as d,aC as a,M as b,b6 as f,az as v,br as m,ap as r,b7 as F,aG as c,z as x}from"./runtime-core.esm-bundler.db039fbe.js";import"./lang.2d0006f0.js";import"./runtime-dom.esm-bundler.febf7d20.js";import"./preload-helper.15853ff5.js";import"./components.0c23fb6d.js";import"./ns-alert-popup.e868772c.js";import"./ns-avatar-image.af6b1173.js";import"./index.es.f7e98ba1.js";import"./vue-upload-component.18541017.js";import"./vue.runtime.esm-bundler.0868408f.js";import"./ns-pos-confirm-popup.cb485ede.js";import"./ns-notice.bcd08020.js";import"./ns-media.c1e2b9d4.js";import"./ns-numpad.41a8e015.js";import"./ns-numpad-plus.49bec1a6.js";import"./ns-pos-loading-popup.48fb88a5.js";import"./ns-paginate.67ffd687.js";import"./ns-prompt-popup.14ac5ecc.js";import"./vue-router.326d75fc.js";const q={data:()=>({form:new y,firstPartFields:[],secondPartFields:[],fields:[]}),methods:{validate(){if(this.form.validateFields(this.firstPartFields)&&this.form.validateFields(this.secondPartFields)){this.form.disableFields(this.firstPartFields),this.form.disableFields(this.secondPartFields),this.firstPartFields.forEach(s=>console.log(s)),this.secondPartFields.forEach(s=>console.log(s));const e={...this.form.getValue(this.firstPartFields),...this.form.getValue(this.secondPartFields)};this.checkDatabase(e).subscribe(s=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),w.push("/configuration"),nsSnackBar.success(s.message,"OKAY",{duration:5e3}).subscribe()},s=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),nsSnackBar.error(s.message,"OKAY").subscribe()})}},checkDatabase(e){return nsHttpClient.post("/api/setup/database",e)},sliceRange(e,i,s){const p=e.length,l=Math.ceil(p/i);return console.log(e),e.splice(s*l,l)}},mounted(){const e=this.form.createFields([{label:"Driver",description:"Set the database driver",name:"database_driver",value:"mysql",type:"select",options:[{label:"MySQL",value:"mysql"},{label:"Postgres",value:"pgsql"},{label:"SQLite",value:"sqlite"}],validation:"required"},{label:"Hostname",description:"Provide the database hostname",name:"hostname",value:"localhost"},{label:"Username",description:"Username required to connect to the database.",name:"username",value:"root"},{label:"Password",description:"The username password required to connect.",name:"password",value:""},{label:"Database Name",description:"Provide the database name. Leave empty to use default file for SQLite Driver.",name:"database_name",value:"nexopos_v4"},{label:"Database Prefix",description:"Provide the database prefix.",name:"database_prefix",value:"ns_",validation:"required"},{label:"Port",description:"Provide the hostname port.",name:"database_port",value:"3306",validation:"required"}]);this.firstPartFields=Object.values(this.sliceRange([...e],2,0)),this.secondPartFields=Object.values(this.sliceRange([...e],2,1))}},C={class:"bg-white rounded shadow my-4"},S={class:"welcome-box border-b border-gray-300 p-3 text-gray-700"},D={class:"md:-mx-4 md:flex"},$={class:"md:px-4 md:w-1/2 w-full"},B={class:"md:px-4 md:w-1/2 w-full"},V={class:"bg-gray-200 p-3 flex justify-end"};function L(e,i,s,p,l,_){const h=u("ns-field"),g=u("ns-button");return o(),d("div",C,[a("div",S,[a("div",D,[a("div",$,[(o(!0),d(b,null,f(e.firstPartFields,(t,n)=>(o(),v(h,{key:n,field:t,onChange:P=>e.form.validateField(t)},{default:m(()=>[a("span",null,r(t.label),1),F(e.$slots,"description",{},()=>[c(r(t.description),1)])]),_:2},1032,["field","onChange"]))),128))]),a("div",B,[(o(!0),d(b,null,f(e.secondPartFields,(t,n)=>(o(),v(h,{key:n,field:t,onChange:P=>e.form.validateField(t)},{default:m(()=>[a("span",null,r(t.label),1),F(e.$slots,"description",{},()=>[c(r(t.description),1)])]),_:2},1032,["field","onChange"]))),128))])])]),a("div",V,[x(g,{onClick:i[0]||(i[0]=t=>_.validate()),type:"info"},{default:m(()=>[c("Save Database")]),_:1})])])}var te=k(q,[["render",L]]);export{te as default};
