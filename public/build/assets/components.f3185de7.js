import te from"./ns-alert-popup.08d82a9a.js";import{_ as v,o as n,a as r,f as l,t as u,e as a,b,n as m,h as T,F as g,r as y,w as E,v as O,g as q,p as U,i as se,j as w,k as S,l as M,m as x,q as _,s as D,P,u as Y,x as le,y as F,z as R,A as ie,K as ne,B,C as H,S as re}from"./bootstrap.91ec4684.js";import{c as de,s as ae,D as N,n as z,V as oe,a as ue,b as ce}from"./ns-notice.3688f715.js";import{_ as p}from"./plugin-vue_export-helper.21dcd24c.js";import L from"./ns-pos-confirm-popup.81cb5794.js";import{n as fe,a as he}from"./ns-numpad-plus.8f8e3c74.js";import me from"./ns-pos-loading-popup.df7afbdd.js";import{n as be}from"./ns-paginate.cd51fdea.js";import _e from"./ns-prompt-popup.c3a7cf11.js";const ge={methods:{__:v},name:"ns-avatar",data(){return{svg:""}},mounted(){this.svg=de(ae,{seed:this.displayName})},computed:{avatarUrl(){return this.url.length===0?"":this.url}},props:["url","display-name"]},ve={class:"flex justify-between items-center flex-shrink-0"},ye={class:"hidden md:inline-block px-2"},pe={class:"md:hidden px-2"},ke={class:"px-2"},xe={class:"w-8 h-8 overflow-hidden rounded-full bg-gray-600"},we=["src","alt"],$e=["innerHTML"];function Ce(e,t,s,h,c,i){return n(),r("div",ve,[l("span",ye,u(i.__("Howdy, {name}").replace("{name}",this.displayName)),1),l("span",pe,u(e.displayName),1),l("div",ke,[l("div",xe,[i.avatarUrl!==""?(n(),r("img",{key:0,src:i.avatarUrl,class:"w-8 h-8 overflow-hidden rounded-full",alt:e.displayName,srcset:""},null,8,we)):a("",!0),i.avatarUrl===""?(n(),r("div",{key:1,innerHTML:c.svg},null,8,$e)):a("",!0)])])])}var De=p(ge,[["render",Ce]]);const Me={data:()=>({clicked:!1,_save:0}),props:["type","disabled","link","href","routerLink","to"],mounted(){},computed:{isDisabled(){return this.disabled&&(this.disabled.length===0||this.disabled==="disabled"||this.disabled)}}},Te=["disabled"],Se=["href"];function Ee(e,t,s,h,c,i){return n(),r("div",{class:m(["flex ns-button",s.type?s.type:"default"])},[!s.link&&!s.href?(n(),r("button",{key:0,disabled:i.isDisabled,class:"flex rounded items-center cursor-pointer py-2 px-3 font-semibold"},[b(e.$slots,"default")],8,Te)):a("",!0),s.href?(n(),r("a",{key:1,href:s.href,class:"flex rounded items-center cursor-pointer py-2 px-3 font-semibold"},[b(e.$slots,"default")],8,Se)):a("",!0)],2)}var Oe=p(Me,[["render",Ee]]);const Fe={name:"ns-calendar",props:["date","field","visible"],data(){return{calendar:[[]],currentDay:T(),daysOfWeek:new Array(7).fill("").map((e,t)=>t),hours:0,minutes:0,currentView:"days",clickedOnCalendar:!1,moment:T,months:new Array(11).fill("").map((e,t)=>t)}},computed:{momentCopy(){return T()}},beforeUnmount(){document.removeEventListener("click",this.checkClickedItem)},mounted(){document.addEventListener("click",this.checkClickedItem),this.currentDay=[void 0,null].includes(this.date)?T():T(this.date),this.build()},methods:{__:v,handleCalendarClick(){this.clickedOnCalendar=!0},getDayClass({day:e,_dayIndex:t,dayOfWeek:s,_index:h,currentDay:c}){const i=[];return i.push(e.date.format("DD")===c.format("DD")&&e.date.format("MM")===c.format("MM")?"bg-info-secondary text-primary border-info-secondary":"hover:bg-numpad-hover"),h===0&&i.push("border-t border-box-background"),e.isDifferentMonth&&i.push("bg-box-background"),i.join(" ")},erase(){this.selectDate()},setYear(e){parseInt(e.srcElement.value)>0&&parseInt(e.srcElement.value)<9999&&(this.currentDay.year(e.srcElement.value),this.selectDate({date:this.currentDay.clone()}))},subYear(){parseFloat(this.currentDay.format("YYYY"))>0&&(this.currentDay.subtract(1,"year"),this.selectDate({date:this.currentDay.clone()}))},addYear(){this.currentDay.add(1,"year"),this.selectDate({date:this.currentDay.clone()})},toggleView(e){this.currentView=e,this.currentView==="years"&&setTimeout(()=>{this.$refs.year.select()},100)},setMonth(e){this.currentDay.month(e),this.selectDate({date:this.currentDay.clone()})},detectHoursChange(){parseFloat(this.hours)<0&&(this.hours=0),parseFloat(this.hours)>23&&(this.hours=23),this.selectDate({date:this.currentDay.clone()})},detectMinuteChange(){parseFloat(this.minutes)<0&&(this.minutes=0),parseFloat(this.minutes)>59&&(this.minutes=59),this.selectDate({date:this.currentDay.clone()})},checkClickedItem(e){this.$parent.$el.getAttribute("class").split(" ").includes("picker")&&(!this.$parent.$el.contains(e.srcElement)&&!this.clickedOnCalendar&&this.visible&&this.$emit("onClickOut",!0),setTimeout(()=>{this.clickedOnCalendar=!1},100))},selectDate(e){[void 0].includes(e)?(this.field&&(this.field.value=null),this.$emit("set",null)):(this.currentDay=e.date,this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.field&&(this.field.value=this.currentDay.format("YYYY/MM/DD HH:mm")),this.$emit("set",this.field?this.field:this.currentDay)),this.build()},subMonth(){this.currentDay.subtract(1,"month"),this.selectDate({date:this.currentDay.clone()})},addMonth(){this.currentDay.add(1,"month"),this.selectDate({date:this.currentDay.clone()})},resetCalendar(){this.calendar=[[]]},build(){this.resetCalendar(),this.currentDay.clone().startOf("month");const e=this.currentDay.clone().startOf("month"),t=this.currentDay.clone().endOf("month");for(;;){e.day()===0&&this.calendar[0].length>0&&this.calendar.push([]);let s=this.calendar.length-1;if(this.calendar[s].push({date:e.clone(),dayOfWeek:e.day(),isToday:e.isSame(T.now(),"day"),isDifferentMonth:!1,isNextMonth:!1,isPreviousMonth:!1}),e.isSame(t,"day"))break;e.add(1,"day")}if(this.calendar[0].length<7){const s=7-this.calendar[0].length,h=this.calendar[0][0].date.clone(),c=[];for(let i=0;i<s;i++)h.subtract(1,"day"),c.unshift({date:h.clone(),dayOfWeek:h.day(),isToday:h.isSame(T.now(),"day"),isDifferentMonth:!0,isNextMonth:!1,isPreviousMonth:!0});this.calendar[0].unshift(...c)}if(this.calendar[this.calendar.length-1].length<7){const s=this.calendar.length-1,h=7-this.calendar[s].length,c=this.calendar[s][this.calendar[s].length-1].date.clone(),i=[];for(let d=0;d<h;d++)c.add(1,"day"),i.push({date:c.clone(),dayOfWeek:c.day(),isToday:c.isSame(T.now(),"day"),isDifferentMonth:!0,isNextMonth:!0,isPreviousMonth:!1});this.calendar[s].push(...i)}}}},je={key:0,class:"flex-auto"},Pe={class:"p-2 flex items-center"},He=l("i",{class:"las la-angle-left"},null,-1),Ye=[He],Le={class:"flex flex-auto font-semibold text-primary justify-center"},Ae=l("i",{class:"las la-angle-right"},null,-1),Ve=[Ae],qe={class:"h-32 flex items-center justify-center text-primary"},Ue={class:"rounded input-group info border-2 flex w-2/3 overflow-hidden"},Re=l("i",{class:"las la-minus"},null,-1),Be=[Re],Ne=["value"],ze=l("i",{class:"las la-plus"},null,-1),Ie=[ze],Ge={key:1,class:"flex-auto border-b border-box-background"},Qe={class:"p-2 flex items-center"},We=l("i",{class:"las la-angle-left"},null,-1),Ke=[We],Ze={class:"flex flex-auto font-semibold text-primary justify-center"},Je={class:"mr-2 border-b border-info-secondary border-dashed"},Xe=l("i",{class:"las la-angle-right"},null,-1),et=[Xe],tt={class:"grid grid-flow-row grid-cols-3 grid-rows-1 gap-0 text-primary divide-x divide-y"},st={class:"w-full h-full"},lt=["onClick"],it={key:2,class:"border-b border-box-background"},nt={class:"p-2 flex items-center"},rt=l("i",{class:"las la-angle-left"},null,-1),dt=[rt],at={class:"flex flex-auto font-semibold text-primary justify-center"},ot=l("i",{class:"las la-angle-right"},null,-1),ut=[ot],ct={class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary divide-x divide-y"},ft={class:"h-8 flex justify-center items-center border-box-background text-sm"},ht={class:"h-8 flex justify-center items-center border-box-background text-sm"},mt={class:"h-8 flex justify-center items-center border-box-background text-sm"},bt={class:"h-8 flex justify-center items-center border-box-background text-sm"},_t={class:"h-8 flex justify-center items-center border-box-background text-sm"},gt={class:"h-8 flex justify-center items-center border-box-background text-sm"},vt={class:"h-8 flex justify-center items-center border-box-background text-sm"},yt=["onClick"],pt={key:0},kt={key:1,class:"text-secondary"},xt={class:"border-t border-numpad-edge w-full p-2"},wt={class:"-mx-1 flex justify-between"},$t={class:"px-1"},Ct={class:"-mx-1 flex"},Dt={key:0,class:"px-1"},Mt=l("i",{class:"las la-trash text-lg"},null,-1),Tt=[Mt],St={key:1,class:"px-1"},Et=l("i",{class:"las la-sign-out-alt"},null,-1),Ot=[Et],Ft={class:"px-2"},jt={class:"rounded flex items-center justify-center p-1 border border-box-background"},Pt={class:"px-3 text-primary"},Ht=l("span",{class:"mx-1"},":",-1);function Yt(e,t,s,h,c,i){return n(),r("div",{onClick:t[20]||(t[20]=d=>i.handleCalendarClick()),class:"flex-auto bg-input-background rounded-lg overflow-hidden"},[c.currentView==="years"?(n(),r("div",je,[l("div",Pe,[l("div",null,[l("button",{onClick:t[0]||(t[0]=d=>i.subMonth()),class:"w-8 h-8 border-box-background border outline-none text-numpad-text hover:bg-numpad-hover rounded"},Ye)]),l("div",Le,[l("span",{class:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",onClick:t[1]||(t[1]=d=>i.toggleView("months"))},u(c.currentDay.format("MMM")),1),l("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:t[2]||(t[2]=d=>i.toggleView("years"))},u(c.currentDay.format("YYYY")),1)]),l("div",null,[l("button",{onClick:t[3]||(t[3]=d=>i.addMonth()),class:"w-8 h-8 border-box-background border outline-none text-numpad-text hover:bg-numpad-hover rounded"},Ve)])]),l("div",qe,[l("div",Ue,[l("button",{onClick:t[4]||(t[4]=d=>i.subYear()),class:"px-4 py-2"},Be),l("input",{type:"text",ref:"year",class:"p-2 w-24 text-center outline-none",onChange:t[5]||(t[5]=d=>i.setYear(d)),value:c.currentDay.format("YYYY")},null,40,Ne),l("button",{onClick:t[6]||(t[6]=d=>i.addYear()),class:"px-4 py-2"},Ie)])])])):a("",!0),c.currentView==="months"?(n(),r("div",Ge,[l("div",Qe,[l("div",null,[l("button",{onClick:t[7]||(t[7]=d=>i.subYear()),class:"w-8 h-8 ns-inset-button outline-none ns-inset-button border-box-background border rounded"},Ke)]),l("div",Ze,[l("span",Je,u(c.currentDay.format("MMM")),1),l("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:t[8]||(t[8]=d=>i.toggleView("years"))},u(c.currentDay.format("YYYY")),1)]),l("div",null,[l("button",{onClick:t[9]||(t[9]=d=>i.addYear()),class:"w-8 h-8 ns-inset-button outline-none ns-inset-button border-box-background border rounded"},et)])]),l("div",tt,[(n(!0),r(g,null,y(c.months,(d,o)=>(n(),r("div",{key:o,class:"h-8 flex justify-center items-center text-sm border-box-background"},[l("div",st,[l("div",{class:m([i.momentCopy.month(d).format("MM")===c.currentDay.format("MM")?"bg-info-secondary text-white":"hover:bg-numpad-hover","h-full w-full border-box-background flex items-center justify-center cursor-pointer"]),onClick:f=>i.setMonth(d)},u(i.momentCopy.format("MMM")),11,lt)])]))),128))])])):a("",!0),c.currentView==="days"?(n(),r("div",it,[l("div",nt,[l("div",null,[l("button",{onClick:t[10]||(t[10]=d=>i.subMonth()),class:"w-8 h-8 bg-input-background border border-box-background rounded"},dt)]),l("div",at,[l("span",{class:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",onClick:t[11]||(t[11]=d=>i.toggleView("months"))},u(c.currentDay.format("MMM")),1),l("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:t[12]||(t[12]=d=>i.toggleView("years"))},u(c.currentDay.format("YYYY")),1)]),l("div",null,[l("button",{onClick:t[13]||(t[13]=d=>i.addMonth()),class:"w-8 h-8 bg-input-background border border-box-background rounded"},ut)])]),l("div",ct,[l("div",ft,u(i.__("Sun")),1),l("div",ht,u(i.__("Mon")),1),l("div",mt,u(i.__("Tue")),1),l("div",bt,u(i.__("Wed")),1),l("div",_t,u(i.__("Thr")),1),l("div",gt,u(i.__("Fri")),1),l("div",vt,u(i.__("Sat")),1)]),(n(!0),r(g,null,y(c.calendar,(d,o)=>(n(),r("div",{key:o,class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary divide-x divide-y"},[(n(!0),r(g,null,y(c.daysOfWeek,(f,k)=>(n(),r("div",{key:k,class:"h-8 flex justify-center items-center text-sm border-box-background"},[(n(!0),r(g,null,y(d,(C,j)=>(n(),r(g,null,[C.dayOfWeek===f?(n(),r("div",{key:j,class:m([i.getDayClass({day:C,_dayIndex:j,dayOfWeek:f,_index:k,currentDay:c.currentDay}),"h-full w-full flex items-center justify-center cursor-pointer"]),onClick:A=>i.selectDate(C)},[C.isDifferentMonth?a("",!0):(n(),r("span",pt,u(C.date.format("DD")),1)),C.isDifferentMonth?(n(),r("span",kt,u(C.date.format("DD")),1)):a("",!0)],10,yt)):a("",!0)],64))),256))]))),128))]))),128))])):a("",!0),l("div",xt,[l("div",wt,[l("div",$t,[l("div",Ct,[s.field?(n(),r("div",Dt,[l("button",{onClick:t[14]||(t[14]=d=>i.erase()),class:"border ns-inset-button error hover:text-white rounded w-11 h-11 flex items-center justify-center"},Tt)])):a("",!0),c.currentView!=="days"?(n(),r("div",St,[l("button",{onClick:t[15]||(t[15]=d=>i.toggleView("days")),class:"border ns-inset-button border-box-background error hover:text-white rounded w-11 h-11 flex items-center justify-center"},Ot)])):a("",!0)])]),l("div",Ft,[l("div",jt,[l("span",Pt,u(i.__("Time")),1),E(l("input",{placeholder:"HH",ref:"hours",onChange:t[16]||(t[16]=d=>i.detectHoursChange(d)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-disabled text-primary active:border-numpad-edge","onUpdate:modelValue":t[17]||(t[17]=d=>c.hours=d),type:"number"},null,544),[[O,c.hours]]),Ht,E(l("input",{placeholder:"mm",ref:"minutes",onChange:t[18]||(t[18]=d=>i.detectMinuteChange(d)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-disabled text-primary active:border-numpad-edge","onUpdate:modelValue":t[19]||(t[19]=d=>c.minutes=d),type:"number"},null,544),[[O,c.minutes]])])])])])])}var I=p(Fe,[["render",Yt]]);const Lt={data:()=>({}),props:["checked","field","label"],computed:{isChecked(){return this.field?this.field.value:this.checked}},methods:{toggleIt(){this.field!==void 0&&(this.field.value=!this.field.value),this.$emit("change",!this.checked)}}},At={class:"w-6 h-6 flex bg-input-background border-input-edge border-2 items-center justify-center cursor-pointer"},Vt={key:0,class:"las la-check"},qt={key:0,class:"mx-2"},Ut={key:1,class:"mx-2"};function Rt(e,t,s,h,c,i){return n(),r("div",{class:"flex items-center justify-center cursor-pointer",onClick:t[0]||(t[0]=d=>i.toggleIt())},[l("div",At,[i.isChecked?(n(),r("i",Vt)):a("",!0)]),s.label?(n(),r("span",qt,u(s.label),1)):a("",!0),s.field?(n(),r("span",Ut,u(s.field.label),1)):a("",!0)])}var Bt=p(Lt,[["render",Rt]]);const Nt={methods:{}},zt={class:"outline-none ns-close-button border rounded-full h-8 w-8 items-center justify-center"},It=l("i",{class:"las la-times"},null,-1),Gt=[It];function Qt(e,t,s,h,c,i){return n(),r("button",zt,Gt)}var Wt=p(Nt,[["render",Qt]]);const Kt={data(){return{fields:[],validation:new q}},methods:{__:v,popupCloser:U,popupResolver:se,closePopup(){this.popupResolver(!1)},useFilters(){this.popupResolver(this.validation.extractFields(this.fields))},clearFilters(){this.fields.forEach(e=>e.value=""),this.popupResolver(null)}},mounted(){this.fields=this.validation.createFields(this.$popupParams.queryFilters),this.popupCloser()}},Zt={class:"ns-box shadow-lg w-95vw h-95vh md:w-2/5-screen overflow-hidden md:h-5/6-screen flex flex-col"},Jt={class:"p-2 border-b ns-box-header flex justify-between items-center"},Xt={class:"p-2 ns-box-body flex-auto overflow-y-auto"},es={class:"p-2 flex justify-between ns-box-footer border-t"};function ts(e,t,s,h,c,i){const d=w("ns-close-button"),o=w("ns-field"),f=w("ns-button");return n(),r("div",Zt,[l("div",Jt,[l("h3",null,u(i.__("Search Filters")),1),l("div",null,[S(d,{onClick:t[0]||(t[0]=k=>i.closePopup())})])]),l("div",Xt,[(n(!0),r(g,null,y(c.fields,(k,C)=>(n(),M(o,{field:k,key:C},null,8,["field"]))),128))]),l("div",es,[l("div",null,[S(f,{onClick:t[1]||(t[1]=k=>i.clearFilters()),type:"error"},{default:x(()=>[_(u(i.__("Clear Filters")),1)]),_:1})]),l("div",null,[S(f,{onClick:t[2]||(t[2]=k=>i.useFilters()),type:"info"},{default:x(()=>[_(u(i.__("Use Filters")),1)]),_:1})])])])}var V=p(Kt,[["render",ts]]);const ss={data:()=>({prependOptions:!1,showOptions:!0,isRefreshing:!1,sortColumn:"",searchInput:"",queryFiltersString:"",searchQuery:"",page:1,bulkAction:"",bulkActions:[],queryFilters:[],withFilters:!1,columns:[],selectedEntries:[],globallyChecked:!1,result:{current_page:null,data:[],first_page_url:null,from:null,last_page:null,last_page_url:null,next_page_url:null,path:null,per_page:null,prev_page_url:null,to:null,total:null}}),name:"ns-crud",mounted(){this.identifier!==void 0&&nsCrudHandler.defineInstance(this.identifier,this),this.loadConfig()},props:["src","create-url","mode","identifier","queryParams"],computed:{getParsedSrc(){return`${this.src}?${this.sortColumn}${this.searchQuery}${this.queryFiltersString}${this.queryPage}${this.getQueryParams()?"&"+this.getQueryParams():""}`},showQueryFilters(){return this.queryFilters.length>0},getSelectedAction(){const e=this.bulkActions.filter(t=>t.identifier===this.bulkAction);return e.length>0?e[0]:!1},pagination(){return this.result?this.pageNumbers(this.result.last_page,this.result.current_page):[]},queryPage(){return this.result?`&page=${this.page}`:""},resultInfo(){return v("displaying {perPage} on {items} items").replace("{perPage}",this.result.total).replace("{items}",this.result.total)}},methods:{__:v,getQueryParams(){return this.queryParams?Object.keys(this.queryParams).map(e=>`${e}=${this.queryParams[e]}`).join("&"):""},pageNumbers(e,t){var s=[];t-3>1&&s.push(1,"...");for(let h=1;h<=e;h++)t+3>h&&t-3<h&&s.push(h);return t+3<e&&s.push("...",e),s.filter(h=>h>0||typeof h=="string")},downloadContent(){nsHttpClient.post(`${this.src}/export?${this.getParsedSrc}`,{entries:this.selectedEntries.map(e=>e.$id)}).subscribe(e=>{setTimeout(()=>document.location=e.url,300),D.success(v("The document has been generated.")).subscribe()},e=>{D.error(e.message||v("Unexpected error occured.")).subscribe()})},clearSelectedEntries(){P.show(L,{title:v("Clear Selected Entries ?"),message:v("Would you like to clear all selected entries ?"),onAction:e=>{e&&(this.selectedEntries=[])}})},refreshRow(e){if(e.$checked===!0)this.selectedEntries.filter(s=>s.$id===e.$id).length===0&&this.selectedEntries.push(e);else{const t=this.selectedEntries.filter(s=>s.$id===e.$id);if(t.length>0){const s=this.selectedEntries.indexOf(t[0]);this.selectedEntries.splice(s,1)}}},handleShowOptions(e){this.result.data.forEach(t=>{t.$id!==e.$id&&(t.$toggled=!1)})},handleGlobalChange(e){this.globallyChecked=e,this.result.data.forEach(t=>{t.$checked=e,this.refreshRow(t)})},loadConfig(){nsHttpClient.get(`${this.src}/config?${this.getQueryParams()}`).subscribe(t=>{this.columns=t.columns,this.bulkActions=t.bulkActions,this.queryFilters=t.queryFilters,this.prependOptions=t.prependOptions,this.showOptions=t.showOptions,this.refresh()},t=>{D.error(t.message,"OK",{duration:!1}).subscribe()})},cancelSearch(){this.searchInput="",this.search()},search(){this.searchInput?this.searchQuery=`&search=${this.searchInput}`:this.searchQuery="",this.refresh()},sort(e){for(let t in this.columns)t!==e&&(this.columns[t].$sorted=!1,this.columns[t].$direction="");switch(this.columns[e].$sorted=!0,this.columns[e].$direction){case"asc":this.columns[e].$direction="desc";break;case"desc":this.columns[e].$direction="";break;case"":this.columns[e].$direction="asc";break}["asc","desc"].includes(this.columns[e].$direction)?this.sortColumn=`active=${e}&direction=${this.columns[e].$direction}`:this.sortColumn="",this.$emit("sort",this.columns[e]),this.refresh()},bulkDo(){if(this.bulkAction)if(this.selectedEntries.length>0){if(confirm(this.getSelectedAction.confirm||this.$slots["error-bulk-confirmation"]||v("Would you like to perform the selected bulk action on the selected entries ?")))return nsHttpClient.post(`${this.src}/bulk-actions`,{action:this.bulkAction,entries:this.selectedEntries.map(e=>e.$id)}).subscribe({next:e=>{D.info(e.message).subscribe(),this.selectedEntries=[],this.refresh()},error:e=>{D.error(e.message).subscribe()}})}else return D.error(this.$slots["error-no-selection"]?this.$slots["error-no-selection"][0].text:v("No selection has been made.")).subscribe();else return D.error(this.$slots["error-no-action"]?this.$slots["error-no-action"][0].text:v("No action has been selected.")).subscribe()},async openQueryFilter(){try{console.log(V);const e=await new Promise((t,s)=>{P.show(V,{resolve:t,reject:s,queryFilters:this.queryFilters})});this.withFilters=!1,this.queryFiltersString="",e!==null&&(this.withFilters=!0,this.queryFiltersString="&queryFilters="+encodeURIComponent(JSON.stringify(e))),this.refresh()}catch{}},refresh(){this.globallyChecked=!1,this.isRefreshing=!0,nsHttpClient.get(`${this.getParsedSrc}`).subscribe(t=>{t.data=t.data.map(s=>(this.selectedEntries.filter(c=>c.$id===s.$id).length>0&&(s.$checked=!0),s)),this.isRefreshing=!1,this.result=t,this.page=t.current_page},t=>{this.isRefreshing=!1,D.error(t.message).subscribe()})}}},ls={key:0,id:"crud-table-header",class:"p-2 border-b border-popup-surface flex flex-col md:flex-row justify-between flex-wrap"},is={id:"crud-search-box",class:"w-full md:w-auto -mx-2 mb-2 md:mb-0 flex"},rs={key:0,class:"px-2 flex items-center justify-center"},ds=["href"],as=l("i",{class:"las la-plus"},null,-1),os=[as],us={class:"px-2"},cs={class:"rounded-full p-1 ns-crud-input flex"},fs=l("i",{class:"las la-search"},null,-1),hs=[fs],ms=l("i",{class:"las la-times"},null,-1),bs=[ms],_s={class:"px-2 flex items-center justify-center"},gs={key:1,class:"px-2 flex items-center"},vs={key:0,class:"las la-filter"},ys={key:1,class:"las la-check"},ps={key:2},ks={key:3},xs={id:"crud-buttons",class:"-mx-1 flex flex-wrap w-full md:w-auto"},ws={key:0,class:"px-1 flex items-center"},$s=l("i",{class:"lar la-check-square"},null,-1),Cs={class:"px-1 flex items-center"},Ds=l("i",{class:"las la-download"},null,-1),Ms={class:"flex"},Ts={class:"overflow-x-auto flex-auto"},Ss={key:0,class:"table ns-table w-full"},Es={class:"text-center px-2 border w-16 py-2"},Os={key:0,class:"text-left px-2 py-2 w-16 border"},Fs=["onClick"],js={class:"w-full flex justify-between items-center"},Ps={class:"flex"},Hs={class:"h-6 w-6 flex justify-center items-center"},Ys={key:0,class:"las la-sort-amount-up"},Ls={key:1,class:"las la-sort-amount-down"},As={key:1,class:"text-left px-2 py-2 w-16 border"},Vs={key:1},qs=["colspan"],Us={class:"p-2 flex border-t flex-col md:flex-row justify-between footer"},Rs={key:0,id:"grouped-actions",class:"mb-2 md:mb-0 flex justify-between rounded-full ns-crud-input p-1"},Bs={class:"bg-input-disabled",selected:"",value:""},Ns=["value"],zs={class:"flex"},Is={class:"items-center flex text-primary mx-4"},Gs={id:"pagination",class:"flex items-center -mx-1"},Qs=l("i",{class:"las la-angle-double-left"},null,-1),Ws=[Qs],Ks=["onClick"],Zs=l("i",{class:"las la-angle-double-right"},null,-1),Js=[Zs];function Xs(e,t,s,h,c,i){const d=w("ns-checkbox"),o=w("ns-table-row");return n(),r("div",{id:"crud-table",class:m(["w-full rounded-lg",s.mode!=="light"?"shadow mb-8":""])},[s.mode!=="light"?(n(),r("div",ls,[l("div",is,[e.createUrl?(n(),r("div",rs,[l("a",{href:e.createUrl||"#",class:"rounded-full ns-crud-button text-sm h-10 flex items-center justify-center cursor-pointer px-3 outline-none border"},os,8,ds)])):a("",!0),l("div",us,[l("div",cs,[E(l("input",{"onUpdate:modelValue":t[0]||(t[0]=f=>e.searchInput=f),type:"text",class:"w-36 md:w-auto bg-transparent outline-none px-2"},null,512),[[O,e.searchInput]]),l("button",{onClick:t[1]||(t[1]=f=>i.search()),class:"rounded-full w-8 h-8 outline-none ns-crud-input-button"},hs),e.searchQuery?(n(),r("button",{key:0,onClick:t[2]||(t[2]=f=>i.cancelSearch()),class:"ml-1 rounded-full w-8 h-8 bg-error-secondary text-white outline-none hover:bg-error-tertiary"},bs)):a("",!0)])]),l("div",_s,[l("button",{onClick:t[3]||(t[3]=f=>i.refresh()),class:"rounded-full text-sm h-10 px-3 outline-none border ns-crud-button"},[l("i",{class:m([e.isRefreshing?"animate-spin":"","las la-sync"])},null,2)])]),i.showQueryFilters?(n(),r("div",gs,[l("button",{onClick:t[4]||(t[4]=f=>i.openQueryFilter()),class:m([e.withFilters?"table-filters-enabled":"table-filters-disabled","ns-crud-button border rounded-full text-sm h-10 px-3 outline-none"])},[e.withFilters?a("",!0):(n(),r("i",vs)),e.withFilters?(n(),r("i",ys)):a("",!0),e.withFilters?a("",!0):(n(),r("span",ps,u(i.__("Filters")),1)),e.withFilters?(n(),r("span",ks,u(i.__("Has Filters")),1)):a("",!0)],2)])):a("",!0)]),l("div",xs,[e.selectedEntries.length>0?(n(),r("div",ws,[l("button",{onClick:t[5]||(t[5]=f=>i.clearSelectedEntries()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 outline-none ns-crud-button border"},[$s,_(" "+u(i.__("{entries} entries selected").replace("{entries}",e.selectedEntries.length)),1)])])):a("",!0),l("div",Cs,[l("button",{onClick:t[6]||(t[6]=f=>i.downloadContent()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 ns-crud-button border outline-none"},[Ds,_(" "+u(i.__("Download")),1)])])])])):a("",!0),l("div",Ms,[l("div",Ts,[Object.values(e.columns).length>0?(n(),r("table",Ss,[l("thead",null,[l("tr",null,[l("th",Es,[S(d,{checked:e.globallyChecked,onChange:t[7]||(t[7]=f=>i.handleGlobalChange(f))},null,8,["checked"])]),e.prependOptions&&e.showOptions?(n(),r("th",Os)):a("",!0),(n(!0),r(g,null,y(e.columns,(f,k)=>(n(),r("th",{key:k,onClick:C=>i.sort(k),style:le({"min-width":f.width||"auto"}),class:"cursor-pointer justify-betweenw-40 border text-left px-2 py-2"},[l("div",js,[l("span",Ps,u(f.label),1),l("span",Hs,[f.$direction==="desc"?(n(),r("i",Ys)):a("",!0),f.$direction==="asc"?(n(),r("i",Ls)):a("",!0)])])],12,Fs))),128)),!e.prependOptions&&e.showOptions?(n(),r("th",As)):a("",!0)])]),l("tbody",null,[e.result.data!==void 0&&e.result.data.length>0?(n(!0),r(g,{key:0},y(e.result.data,(f,k)=>(n(),M(o,{key:k,onUpdated:t[8]||(t[8]=C=>i.refreshRow(C)),columns:e.columns,prependOptions:e.prependOptions,showOptions:e.showOptions,row:f,onReload:t[9]||(t[9]=C=>i.refresh()),onToggled:t[10]||(t[10]=C=>i.handleShowOptions(C))},null,8,["columns","prependOptions","showOptions","row"]))),128)):a("",!0),!e.result||e.result.data.length===0?(n(),r("tr",Vs,[l("td",{colspan:Object.values(e.columns).length+2,class:"text-center text-gray-600 dark:text-slate-300 py-3"},u(i.__("There is nothing to display...")),9,qs)])):a("",!0)])])):a("",!0)])]),l("div",Us,[e.bulkActions.length>0?(n(),r("div",Rs,[E(l("select",{class:"outline-none bg-transparent","onUpdate:modelValue":t[11]||(t[11]=f=>e.bulkAction=f),id:"grouped-actions"},[l("option",Bs,[b(e.$slots,"bulk-label",{},()=>[_(u(i.__("Bulk Actions")),1)])]),(n(!0),r(g,null,y(e.bulkActions,(f,k)=>(n(),r("option",{class:"bg-input-disabled",key:k,value:f.identifier},u(f.label),9,Ns))),128))],512),[[Y,e.bulkAction]]),l("button",{onClick:t[12]||(t[12]=f=>i.bulkDo()),class:"ns-crud-input-button h-8 px-3 outline-none rounded-full flex items-center justify-center"},[b(e.$slots,"bulk-go",{},()=>[_(u(i.__("Apply")),1)])])])):a("",!0),l("div",zs,[l("div",Is,u(i.resultInfo),1),l("div",Gs,[e.result.current_page?(n(),r(g,{key:0},[l("a",{href:"javascript:void(0)",onClick:t[13]||(t[13]=f=>{e.page=e.result.first_page,i.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},Ws),(n(!0),r(g,null,y(i.pagination,(f,k)=>(n(),r(g,null,[e.page!=="..."?(n(),r("a",{key:k,class:m([e.page==f?"bg-info-tertiary border-transparent text-white":"","mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"]),onClick:C=>{e.page=f,i.refresh()},href:"javascript:void(0)"},u(f),11,Ks)):a("",!0),e.page==="..."?(n(),r("a",{key:k,href:"javascript:void(0)",class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"},"...")):a("",!0)],64))),256)),l("a",{href:"javascript:void(0)",onClick:t[14]||(t[14]=f=>{e.page=e.result.last_page,i.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},Js)],64)):a("",!0)])])])],2)}var el=p(ss,[["render",Xs]]);const tl={data:()=>({form:{},globallyChecked:!1,formValidation:new q,rows:[]}),mounted(){this.loadForm()},props:["src","create-url","field-class","return-url","submit-url","submit-method","disable-tabs"],computed:{activeTabFields(){for(let e in this.form.tabs)if(this.form.tabs[e].active)return this.form.tabs[e].fields;return[]}},methods:{__:v,toggle(e){for(let t in this.form.tabs)this.form.tabs[t].active=!1;this.form.tabs[e].active=!0},handleShowOptions(e){this.rows.forEach(t=>{t.$id!==e.$id&&(t.$toggled=!1)})},submit(){if(this.formValidation.validateForm(this.form).length>0)return D.error(this.$slots["error-invalid"]?this.$slots["error-invalid"][0].text:"No error message provided for having an invalid form.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe();if(this.formValidation.disableForm(this.form),this.submitUrl===void 0)return D.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:"No error message provided for not having a valid submit url.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe();F[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,this.formValidation.extractForm(this.form)).subscribe(e=>{if(e.status==="success"){if(this.submitMethod&&this.submitMethod.toLowerCase()==="post"&&this.returnUrl!==!1)return document.location=e.data.editUrl||this.returnUrl;D.info(e.message,v("Okay"),{duration:3e3}).subscribe(),this.$emit("save",e)}this.formValidation.enableForm(this.form)},e=>{D.error(e.message,void 0,{duration:5e3}).subscribe(),e.data!==void 0&&this.formValidation.triggerError(this.form,e.data),this.formValidation.enableForm(this.form)})},handleGlobalChange(e){this.globallyChecked=e,this.rows.forEach(t=>t.$checked=e)},loadForm(){F.get(`${this.src}`).subscribe({next:t=>{this.form=this.parseForm(t.form),R.doAction("ns-crud-form-loaded",this),this.$emit("updated",this.form)},error:t=>{D.error(t.message,"OKAY",{duration:0}).subscribe()}})},parseForm(e){e.main.value=e.main.value===void 0?"":e.main.value,e.main=this.formValidation.createFields([e.main])[0];let t=0;for(let s in e.tabs)t===0&&(e.tabs[s].active=!0),e.tabs[s].active=e.tabs[s].active===void 0?!1:e.tabs[s].active,e.tabs[s].fields=this.formValidation.createFields(e.tabs[s].fields),t++;return e}}},sl={class:"form flex-auto",id:"crud-form"},ll={key:0,class:"flex items-center justify-center h-full"},il={key:1},nl={class:"flex flex-col"},rl={key:0,class:"flex justify-between items-center"},dl={for:"title",class:"font-bold my-2 text-primary"},al={key:0},ol={for:"title",class:"text-sm my-2"},ul=["href"],cl=["disabled"],fl=["disabled"],hl={key:0,class:"text-xs text-primary py-1"},ml={key:0},bl={key:1},_l={key:0,id:"tabs-container",class:"my-5 ns-tab"},gl={class:"header flex ml-4",style:{"margin-bottom":"-1px"}},vl=["onClick"],yl={class:"ns-tab-item"},pl={class:"border p-4 rounded"},kl={class:"-mx-4 flex flex-wrap"},xl={key:0,class:"flex justify-end"},wl=["disabled"];function $l(e,t,s,h,c,i){const d=w("ns-spinner"),o=w("ns-field");return n(),r("div",sl,[Object.values(e.form).length===0?(n(),r("div",ll,[S(d)])):a("",!0),Object.values(e.form).length>0?(n(),r("div",il,[l("div",nl,[e.form.main?(n(),r("div",rl,[l("label",dl,[e.form.main.name?(n(),r("span",al,u(e.form.main.label),1)):a("",!0)]),l("div",ol,[e.returnUrl?(n(),r("a",{key:0,href:e.returnUrl,class:"rounded-full border px-2 py-1 ns-inset-button error"},u(i.__("Go Back")),9,ul)):a("",!0)])])):a("",!0),e.form.main.name?(n(),r(g,{key:1},[l("div",{class:m([e.form.main.disabled?"disabled":e.form.main.errors.length>0?"error":"info","input-group flex border-2 rounded overflow-hidden"])},[E(l("input",{"onUpdate:modelValue":t[0]||(t[0]=f=>e.form.main.value=f),onBlur:t[1]||(t[1]=f=>e.formValidation.checkField(e.form.main)),onChange:t[2]||(t[2]=f=>e.formValidation.checkField(e.form.main)),disabled:e.form.main.disabled,type:"text",class:"flex-auto outline-none h-10 px-2"},null,40,cl),[[O,e.form.main.value]]),l("button",{disabled:e.form.main.disabled,class:m([e.form.main.disabled?"disabled":e.form.main.errors.length>0?"error":"","outline-none px-4 h-10 text-white border-l border-gray-400"]),onClick:t[3]||(t[3]=f=>i.submit())},[b(e.$slots,"save",{},()=>[_("Save")])],10,fl)],2),e.form.main.description&&e.form.main.errors.length===0?(n(),r("p",hl,u(e.form.main.description),1)):a("",!0),(n(!0),r(g,null,y(e.form.main.errors,(f,k)=>(n(),r("p",{key:k,class:"text-xs py-1 text-error-tertiary"},[f.identifier==="required"?(n(),r("span",ml,[b(e.$slots,"error-required",{},()=>[_(u(f.identifier),1)])])):a("",!0),f.identifier==="invalid"?(n(),r("span",bl,[b(e.$slots,"error-invalid",{},()=>[_(u(f.message),1)])])):a("",!0)]))),128))],64)):a("",!0)]),e.disableTabs!=="true"?(n(),r("div",_l,[l("div",gl,[(n(!0),r(g,null,y(e.form.tabs,(f,k)=>(n(),r("div",{key:k,onClick:C=>i.toggle(k),class:m([f.active?"active border border-b-transparent":"inactive border","tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer"]),style:{"margin-right":"-1px"}},u(f.label),11,vl))),128))]),l("div",yl,[l("div",pl,[l("div",kl,[(n(!0),r(g,null,y(i.activeTabFields,(f,k)=>(n(),r("div",{key:k,class:m(e.fieldClass||"px-4 w-full md:w-1/2 lg:w-1/3")},[S(o,{onBlur:C=>e.formValidation.checkField(f),onChange:C=>e.formValidation.checkField(f),field:f},null,8,["onBlur","onChange","field"])],2))),128))]),e.form.main.name?a("",!0):(n(),r("div",xl,[l("div",{class:m(["ns-button",e.form.main.disabled?"default":e.form.main.errors.length>0?"error":"info"])},[l("button",{disabled:e.form.main.disabled,onClick:t[4]||(t[4]=f=>i.submit()),class:"outline-none px-4 h-10 border-l"},[b(e.$slots,"save",{},()=>[_(u(i.__("Save")),1)])],8,wl)],2)]))])])])):a("",!0)])):a("",!0)])}var Cl=p(tl,[["render",$l]]);const Dl={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-input-edge cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},Ml={class:"flex flex-auto flex-col mb-2"},Tl=["for"],Sl={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},El={class:"sm:text-sm sm:leading-5"},Ol=["disabled","id","placeholder"],Fl={key:0,class:"text-xs text-secondary"};function jl(e,t,s,h,c,i){return n(),r("div",Ml,[l("label",{for:s.field.name,class:m([i.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[b(e.$slots,"default")],10,Tl),l("div",{class:m([i.hasError?"border-error-primary":"border-input-edge","bg-input-background text-secondary mt-1 relative border-2 rounded-md focus:shadow-sm"])},[s.leading?(n(),r("div",Sl,[l("span",El,u(s.leading),1)])):a("",!0),E(l("input",{disabled:s.field.disabled,"onUpdate:modelValue":t[0]||(t[0]=d=>s.field.value=d),onBlur:t[1]||(t[1]=d=>e.$emit("blur",this)),onChange:t[2]||(t[2]=d=>e.$emit("change",this)),id:s.field.name,type:"date",class:m([i.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,Ol),[[O,s.field.value]])],2),!s.field.errors||s.field.errors.length===0?(n(),r("p",Fl,[b(e.$slots,"description")])):a("",!0),(n(!0),r(g,null,y(s.field.errors,(d,o)=>(n(),r("p",{key:o,class:"text-xs text-error-primary"},[d.identifier==="required"?b(e.$slots,d.identifier,{key:0},()=>[_(u(e.__("This field is required.")),1)]):a("",!0),d.identifier==="email"?b(e.$slots,d.identifier,{key:1},()=>[_(u(e.__("This field must contain a valid email address.")),1)]):a("",!0),d.identifier==="invalid"?b(e.$slots,d.identifier,{key:2},()=>[_(u(d.message),1)]):a("",!0)]))),128))])}var Pl=p(Dl,[["render",jl]]);const Hl={name:"ns-date-range-picker",data(){return{dateRange:{startDate:null,endDate:null}}},components:{DateRangePicker:N},mounted(){this.field.value!==void 0&&(this.dateRange=this.field.value)},watch:{dateRange(){const e={startDate:T(this.dateRange.startDate).format("YYYY-MM-DD HH:mm"),endDate:T(this.dateRange.endDate).format("YYYY-MM-DD HH:mm")};this.field.value=e,this.$emit("change",this)}},methods:{__:v,getFormattedDate(e){return e!==null?T(e).format("YYYY-MM-DD HH:mm"):v("N/D")},clearDate(){this.dateRange={startDate:null,endDate:null},this.field.value=void 0}},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},Yl={class:"flex flex-auto flex-col mb-2 ns-date-range-picker"},Ll=["for"],Al={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Vl={class:"text-primary sm:text-sm sm:leading-5"},ql=l("i",{class:"las la-times"},null,-1),Ul=[ql],Rl={class:"flex justify-between items-center w-full py-2"},Bl={class:"text-xs"},Nl={class:"text-xs"},zl={key:0,class:"text-xs text-gray-500"};function Il(e,t,s,h,c,i){const d=w("date-range-picker");return n(),r("div",Yl,[l("label",{for:s.field.name,class:m([i.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[b(e.$slots,"default")],10,Ll),l("div",{class:m([i.hasError?"error":"","mt-1 relative flex input-group border-2 rounded-md overflow-hidden focus:shadow-sm"])},[s.leading?(n(),r("div",Al,[l("span",Vl,u(s.leading),1)])):a("",!0),l("button",{class:"px-3 outline-none bg-error-secondary font-semibold text-white",onClick:t[0]||(t[0]=o=>i.clearDate())},Ul),S(d,{class:"w-full flex items-center bg-input-background",ref:"picker","locale-data":{firstDay:1,format:"yyyy-mm-dd HH:mm:ss"},timePicker:!0,timePicker24Hour:!0,showWeekNumbers:!0,showDropdowns:!0,autoApply:!1,appendToBody:!0,modelValue:c.dateRange,"onUpdate:modelValue":t[1]||(t[1]=o=>c.dateRange=o),disabled:s.field.disabled,linkedCalendars:!0},{input:x(o=>[l("div",Rl,[l("span",Bl,u(i.__("Range Starts"))+" : "+u(i.getFormattedDate(o.startDate)),1),l("span",Nl,u(i.__("Range Ends"))+" : "+u(i.getFormattedDate(o.endDate)),1)])]),_:1},8,["modelValue","disabled"])],2),!s.field.errors||s.field.errors.length===0?(n(),r("p",zl,[b(e.$slots,"description")])):a("",!0),(n(!0),r(g,null,y(s.field.errors,(o,f)=>(n(),r("p",{key:f,class:"text-xs text-red-400"},[o.identifier==="required"?b(e.$slots,o.identifier,{key:0},()=>[_(u(i.__("This field is required.")),1)]):a("",!0),o.identifier==="email"?b(e.$slots,o.identifier,{key:1},()=>[_(u(i.__("This field must contain a valid email address.")),1)]):a("",!0),o.identifier==="invalid"?b(e.$slots,o.identifier,{key:2},()=>[_(u(o.message),1)]):a("",!0)]))),128))])}var G=p(Hl,[["render",Il]]);const Gl={name:"ns-date-time-picker",props:["field","date"],data(){return{visible:!1,hours:0,minutes:0,currentView:"days",currentDay:void 0,moment:T}},computed:{fieldDate(){return T(this.field.value)}},mounted(){},methods:{__:v,setDate(e){this.field.value=e}}},Ql={class:"picker mb-2"},Wl={key:0,class:"block leading-5 font-medium text-primary"},Kl={class:"ns-button"},Zl=l("i",{class:"las la-clock text-2xl"},null,-1),Jl={key:0,class:"mx-1 text-sm"},Xl={key:0},ei={key:1},ti={key:1,class:"text-sm text-secondary py-1"},si={key:2,class:"relative z-10 h-0 w-0"};function li(e,t,s,h,c,i){const d=w("ns-calendar");return n(),r("div",Ql,[s.field?(n(),r("label",Wl,u(s.field.label),1)):a("",!0),l("div",Kl,[l("button",{onClick:t[0]||(t[0]=o=>c.visible=!c.visible),class:m([s.field?"mt-1":"","shadow rounded cursor-pointer w-full px-1 py-1 flex items-center text-primary"])},[Zl,s.field?(n(),r("span",Jl,[s.field.value!==null?(n(),r("span",Xl,u(i.fieldDate.format("YYYY/MM/DD HH:mm")),1)):a("",!0),s.field.value===null?(n(),r("span",ei,"N/A")):a("",!0)])):a("",!0)],2)]),s.field?(n(),r("p",ti,u(s.field.description),1)):a("",!0),c.visible?(n(),r("div",si,[l("div",{class:m([s.field?"-mt-4":"mt-2","absolute w-72 shadow-xl rounded ns-box anim-duration-300 zoom-in-entrance flex flex-col"])},[S(d,{onOnClickOut:t[1]||(t[1]=o=>c.visible=!1),onSet:t[2]||(t[2]=o=>i.setDate(o)),visible:c.visible,date:s.field.value},null,8,["visible","date"])],2)])):a("",!0)])}var Q=p(Gl,[["render",li]]);const ii={name:"ns-datepicker",components:{nsCalendar:I},props:["label","date","format"],computed:{formattedDate(){return T(this.date).format(this.format||"YYYY-MM-DD HH:MM:ss")}},data(){return{visible:!1}},mounted(){},methods:{__:v,setDate(e){console.log(e),this.$emit("set",e)}}},ni={class:"picker"},ri=l("i",{class:"las la-clock text-2xl"},null,-1),di={class:"mx-1 text-sm"},ai={key:0},oi={key:1},ui={key:0,class:"relative h-0 w-0 -mb-2"},ci={class:"w-72 mt-2 shadow anim-duration-300 zoom-in-entrance flex flex-col"};function fi(e,t,s,h,c,i){const d=w("ns-calendar");return n(),r("div",ni,[l("div",{onClick:t[0]||(t[0]=o=>c.visible=!c.visible),class:"rounded cursor-pointer bg-input-background shadow px-1 py-1 flex items-center text-primary"},[ri,l("span",di,[l("span",null,u(s.label||i.__("Date"))+" : ",1),s.date?(n(),r("span",ai,u(i.formattedDate),1)):(n(),r("span",oi,u(i.__("N/A")),1))])]),c.visible?(n(),r("div",ui,[l("div",ci,[S(d,{visible:c.visible,onOnClickOut:t[1]||(t[1]=o=>c.visible=!1),date:s.date,onSet:t[2]||(t[2]=o=>i.setDate(o))},null,8,["visible","date"])])])):a("",!0)])}var hi=p(ii,[["render",fi]]);const mi={name:"ns-date-range-picker",data(){return{dateRange:{startDate:null,endDate:null},rangeViewToggled:!1}},components:{DateRangePicker:N},mounted(){this.field.value!==void 0&&this.field.value.startDate&&this.field.value.endDate&&(this.dateRange=this.field.value)},watch:{dateRange(){const e={startDate:T(this.dateRange.startDate).format("YYYY-MM-DD HH:mm"),endDate:T(this.dateRange.endDate).format("YYYY-MM-DD HH:mm")};this.field.value=e,this.$emit("change",this)}},methods:{__:v,getFormattedDate(e){return e!==null?T(e).format("YYYY-MM-DD HH:mm"):v("N/D")},clearDate(){this.dateRange={startDate:null,endDate:null},this.field.value=void 0},toggleRangeView(){this.rangeViewToggled=!this.rangeViewToggled}},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"},startDateFormatted(){return T(this.field.value.startDate).format("YYYY-MM-DD HH:mm")},endDateFormatted(){return T(this.field.value.endDate).format("YYYY-MM-DD HH:mm")}},props:["placeholder","leading","type","field"]},bi={class:"flex flex-auto flex-col mb-2 ns-date-range-picker"},_i=["for"],gi={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},vi={class:"text-primary sm:text-sm sm:leading-5"},yi=l("span",{class:"mr-1"},[l("i",{class:"las la-clock text-2xl"})],-1),pi={class:""},ki=l("span",{class:"mx-2"},"\u2014",-1),xi=l("span",{class:"mr-1"},[l("i",{class:"las la-clock text-2xl"})],-1),wi={class:""},$i=l("i",{class:"las la-times"},null,-1),Ci=[$i],Di={key:0,class:"relative h-0 w-0"},Mi={class:"w-120 mt-2 shadow anim-duration-300 zoom-in-entrance flex flex-col"},Ti={class:"flex bg-input-background rounded-lg"},Si=l("div",{class:"px-2 border-l border-r border-box-background"},null,-1),Ei={key:1,class:"text-xs text-gray-500"};function Oi(e,t,s,h,c,i){const d=w("ns-calendar");return n(),r("div",bi,[l("label",{for:s.field.name,class:m([i.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[b(e.$slots,"default")],10,_i),l("div",{class:m([i.hasError?"error":"","mt-1 relative flex input-group shadow rounded overflow-hidden focus:shadow-sm bg-input-background border-input-edge"])},[s.leading?(n(),r("div",gi,[l("span",vi,u(s.leading),1)])):a("",!0),l("div",{class:"flex flex-auto p-1 text-primary text-sm items-center cursor-pointer",onClick:t[0]||(t[0]=o=>i.toggleRangeView())},[yi,l("span",pi,u(i.startDateFormatted||i.__("N/A")),1),ki,xi,l("span",wi,u(i.endDateFormatted||i.__("N/A")),1)]),l("button",{class:"px-3 outline-none bg-error-secondary font-semibold text-white",onClick:t[1]||(t[1]=o=>i.clearDate())},Ci)],2),c.rangeViewToggled?(n(),r("div",Di,[l("div",Mi,[l("div",Ti,[S(d,{onSet:t[2]||(t[2]=o=>s.field.value.startDate=o),date:s.field.startDate},null,8,["date"]),Si,S(d,{onSet:t[3]||(t[3]=o=>s.field.value.endDate=o),date:s.field.endDate},null,8,["date"])])])])):a("",!0),!s.field.errors||s.field.errors.length===0?(n(),r("p",Ei,[b(e.$slots,"description")])):a("",!0),(n(!0),r(g,null,y(s.field.errors,(o,f)=>(n(),r("p",{key:f,class:"text-xs text-red-400"},[o.identifier==="required"?b(e.$slots,o.identifier,{key:0},()=>[_(u(i.__("This field is required.")),1)]):a("",!0),o.identifier==="email"?b(e.$slots,o.identifier,{key:1},()=>[_(u(i.__("This field must contain a valid email address.")),1)]):a("",!0),o.identifier==="invalid"?b(e.$slots,o.identifier,{key:2},()=>[_(u(o.message),1)]):a("",!0)]))),128))])}var Fi=p(mi,[["render",Oi]]);const ji={data:()=>({}),mounted(){},components:{nsDateRangePicker:G,nsDateTimePicker:Q,nsSwitch:z},computed:{isInputField(){return["text","password","email","number","tel"].includes(this.field.type)},isDateField(){return["date"].includes(this.field.type)},isSelectField(){return["select"].includes(this.field.type)},isTextarea(){return["textarea"].includes(this.field.type)},isCheckbox(){return["checkbox"].includes(this.field.type)},isMultiselect(){return["multiselect"].includes(this.field.type)},isSelectAudio(){return["select-audio"].includes(this.field.type)},isSwitch(){return["switch"].includes(this.field.type)},isMedia(){return["media"].includes(this.field.type)},isCkEditor(){return["ckeditor"].includes(this.field.type)},isDateTimePicker(){return["datetimepicker"].includes(this.field.type)},isDateRangePicker(){return["daterangepicker"].includes(this.field.type)},isCustom(){return["custom"].includes(this.field.type)}},props:["field"],methods:{addOption(e){this.field.type==="select"&&this.field.options.forEach(s=>s.selected=!1),e.selected=!0;const t=this.field.options.indexOf(e);this.field.options.splice(t,1),this.field.options.unshift(e),this.refreshMultiselect(),this.$emit("change",{action:"addOption",option:e})},refreshMultiselect(){this.field.value=this.field.options.filter(e=>e.selected).map(e=>e.value)},removeOption(e){e.selected=!1,this.refreshMultiselect(),this.$emit("change",{action:"removeOption",option:e})}}},Pi={class:"flex flex-auto"},Hi=["innerHTML"],Yi=["innerHTML"],Li=["innerHTML"],Ai=["innerHTML"],Vi=["innerHTML"],qi=["innerHTML"],Ui=["innerHTML"],Ri=["innerHTML"],Bi=["innerHTML"],Ni=["innerHTML"],zi=["innerHTML"],Ii=["innerHTML"];function Gi(e,t,s,h,c,i){const d=w("ns-input"),o=w("ns-date-time-picker"),f=w("ns-date"),k=w("ns-media-input"),C=w("ns-select"),j=w("ns-date-range-picker"),A=w("ns-select-audio"),K=w("ns-textarea"),Z=w("ns-checkbox"),J=w("ns-multiselect"),X=w("ns-ckeditor"),ee=w("ns-switch");return n(),r("div",Pi,[i.isInputField?(n(),M(d,{key:0,onBlur:t[0]||(t[0]=$=>e.$emit("blur",s.field)),onChange:t[1]||(t[1]=$=>e.$emit("change",s.field)),field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Hi)]),_:1},8,["field"])):a("",!0),i.isDateTimePicker?(n(),M(o,{key:1,onBlur:t[2]||(t[2]=$=>e.$emit("blur",s.field)),onChange:t[3]||(t[3]=$=>e.$emit("change",s.field)),field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Yi)]),_:1},8,["field"])):a("",!0),i.isDateField?(n(),M(f,{key:2,onBlur:t[4]||(t[4]=$=>e.$emit("blur",s.field)),onChange:t[5]||(t[5]=$=>e.$emit("change",s.field)),field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Li)]),_:1},8,["field"])):a("",!0),i.isMedia?(n(),M(k,{key:3,onBlur:t[6]||(t[6]=$=>e.$emit("blur",s.field)),onChange:t[7]||(t[7]=$=>e.$emit("change",s.field)),field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Ai)]),_:1},8,["field"])):a("",!0),i.isSelectField?(n(),M(C,{key:4,onBlur:t[8]||(t[8]=$=>e.$emit("blur",s.field)),onChange:t[9]||(t[9]=$=>e.$emit("change",s.field)),field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Vi)]),_:1},8,["field"])):a("",!0),i.isDateRangePicker?(n(),M(j,{key:5,onBlur:t[10]||(t[10]=$=>e.$emit("blur",s.field)),onChange:t[11]||(t[11]=$=>e.$emit("change",s.field)),field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,qi)]),_:1},8,["field"])):a("",!0),i.isSelectAudio?(n(),M(A,{key:6,onBlur:t[12]||(t[12]=$=>e.$emit("blur",s.field)),onChange:t[13]||(t[13]=$=>e.$emit("change",s.field)),field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Ui)]),_:1},8,["field"])):a("",!0),i.isTextarea?(n(),M(K,{key:7,onBlur:t[14]||(t[14]=$=>e.$emit("blur",s.field)),onChange:t[15]||(t[15]=$=>e.$emit("change",s.field)),field:s.field},{description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Ri)]),default:x(()=>[l("template",null,[_(u(s.field.label),1)])]),_:1},8,["field"])):a("",!0),i.isCheckbox?(n(),M(Z,{key:8,onBlur:t[16]||(t[16]=$=>e.$emit("blur",s.field)),onChange:t[17]||(t[17]=$=>e.$emit("change",s.field)),field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Bi)]),_:1},8,["field"])):a("",!0),i.isMultiselect?(n(),M(J,{key:9,onAddOption:t[18]||(t[18]=$=>i.addOption($)),onRemoveOption:t[19]||(t[19]=$=>i.removeOption($)),field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Ni)]),_:1},8,["field"])):a("",!0),i.isCkEditor?(n(),M(X,{key:10,field:s.field},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,zi)]),_:1},8,["field"])):a("",!0),i.isSwitch?(n(),M(ee,{key:11,field:s.field,onChange:t[20]||(t[20]=$=>e.$emit("change",s.field))},{default:x(()=>[_(u(s.field.label),1)]),description:x(()=>[l("span",{innerHTML:s.field.description||""},null,8,Ii)]),_:1},8,["field"])):a("",!0),i.isCustom?(n(),M(ne,{key:12},[(n(),M(ie(s.field.component),{field:s.field,onBlur:t[21]||(t[21]=$=>e.$emit("blur",s.field)),onChange:t[22]||(t[22]=$=>e.$emit("change",s.field))},null,40,["field"]))],1024)):a("",!0)])}var Qi=p(ji,[["render",Gi]]);const Wi={props:["className","buttonClass","type"],methods:{clicked(e){this.$emit("click",e)}}};function Ki(e,t,s,h,c,i){return n(),r("button",{onClick:t[0]||(t[0]=d=>i.clicked(d)),class:m([s.type?s.type:s.buttonClass,"ns-inset-button rounded-full h-8 w-8 border items-center justify-center"])},[l("i",{class:m([s.className,"las"])},null,2)],2)}var Zi=p(Wi,[["render",Ki]]);const Ji={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},Xi={class:"flex flex-col mb-2 flex-auto ns-input"},en=["for"],tn={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},sn={class:"leading sm:text-sm sm:leading-5"},ln=["disabled","id","type","placeholder"],nn={key:0,class:"text-xs ns-description"};function rn(e,t,s,h,c,i){return n(),r("div",Xi,[l("label",{for:s.field.name,class:m([i.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[b(e.$slots,"default")],10,en),l("div",{class:m([i.hasError?"has-error":"is-pristine","mt-1 relative overflow-hidden border-2 rounded-md focus:shadow-sm mb-2"])},[s.leading?(n(),r("div",tn,[l("span",sn,u(s.leading),1)])):a("",!0),E(l("input",{disabled:s.field.disabled,"onUpdate:modelValue":t[0]||(t[0]=d=>s.field.value=d),onBlur:t[1]||(t[1]=d=>e.$emit("blur",this)),onChange:t[2]||(t[2]=d=>e.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([i.inputClass,"block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,ln),[[B,s.field.value]])],2),!s.field.errors||s.field.errors.length===0?(n(),r("p",nn,[b(e.$slots,"description")])):a("",!0),(n(!0),r(g,null,y(s.field.errors,(d,o)=>(n(),r("p",{key:o,class:"text-xs ns-error"},[d.identifier==="required"?b(e.$slots,d.identifier,{key:0},()=>[_("This field is required.")]):a("",!0),d.identifier==="email"?b(e.$slots,d.identifier,{key:1},()=>[_("This field must contain a valid email address.")]):a("",!0),d.identifier==="invalid"?b(e.$slots,d.identifier,{key:2},()=>[_(u(d.message),1)]):a("",!0)]))),128))])}var dn=p(Ji,[["render",rn]]);const an={data:()=>({clicked:!1,_save:0}),props:["type","to","href","target"],computed:{buttonclass(){switch(this.type){case"info":return"shadow bg-blue-400 text-white";case"success":return"shadow bg-green-400 text-white";case"error":return"shadow bg-red-400 text-white";case"warning":return"shadow bg-orange-400 text-white";default:return"shadow bg-white text-gray-800"}}}},on={class:"flex"},un=["target","href"];function cn(e,t,s,h,c,i){const d=w("router-link");return n(),r("div",on,[s.to?(n(),M(d,{key:0,to:s.to,class:m([i.buttonclass,"rounded cursor-pointer py-2 px-3 font-semibold"])},{default:x(()=>[b(e.$slots,"default")]),_:3},8,["to","class"])):a("",!0),s.href?(n(),r("a",{key:1,target:s.target,href:s.href,class:m([i.buttonclass,"hover:underline rounded cursor-pointer py-2 px-3 font-semibold"])},[b(e.$slots,"default")],10,un)):a("",!0)])}var fn=p(an,[["render",cn]]);const hn={name:"ns-media",props:["$popup"],components:{VueUpload:oe},data(){return{searchFieldDebounce:null,searchField:"",pages:[{label:v("Upload"),name:"upload",selected:!1},{label:v("Gallery"),name:"gallery",selected:!0}],resources:[],isDragging:!1,response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},queryPage:1,bulkSelect:!1,files:[]}},mounted(){this.popupCloser();const e=this.pages.filter(t=>t.name==="gallery")[0];this.select(e)},watch:{searchField(){clearTimeout(this.searchFieldDebounce),this.searchFieldDebounce=setTimeout(()=>{this.loadGallery(1)},500)},files:{handler(){this.uploadFiles()},deep:!0}},computed:{postMedia(){return R.applyFilters("http-client-url","/api/nexopos/v4/medias")},currentPage(){return this.pages.filter(e=>e.selected)[0]},hasOneSelected(){return this.response.data.filter(e=>e.selected).length>0},selectedResource(){return this.response.data.filter(e=>e.selected)[0]},csrf(){return ns.authentication.csrf},isPopup(){return typeof this.$popup!="undefined"},user_id(){return this.isPopup&&this.$popupParams.user_id||0},panelOpened(){return!this.bulkSelect&&this.hasOneSelected},popupInstance(){return this.$popup}},methods:{popupCloser:U,__:v,cancelBulkSelect(){this.bulkSelect=!1,this.response.data.forEach(e=>e.selected=!1)},deleteSelected(){Popup.show(L,{title:v("Confirm Your Action"),message:v("You're about to delete selected resources. Would you like to proceed?"),onAction:e=>{e&&F.post("/api/nexopos/v4/medias/bulk-delete",{ids:this.response.data.filter(t=>t.selected).map(t=>t.id)}).subscribe({next:t=>{D.success(t.message).subscribe(),this.loadGallery()},error:t=>{D.error(t.message).subscribe()}})}})},loadUploadScreen(){setTimeout(()=>{this.setDropZone()},1e3)},setDropZone(){const e=document.getElementById("dropping-zone");e.addEventListener("dragenter",s=>this.preventDefaults(s),!1),e.addEventListener("dragleave",s=>this.preventDefaults(s),!1),e.addEventListener("dragover",s=>this.preventDefaults(s),!1),e.addEventListener("drop",s=>this.preventDefaults(s),!1),["dragenter","dragover"].forEach(s=>{e.addEventListener(s,()=>{this.isDragging=!0})}),["dragleave","drop"].forEach(s=>{e.addEventListener(s,()=>{this.isDragging=!1})}),e.addEventListener("drop",s=>this.handleDrop(s),!1),this.$refs.files.addEventListener("change",s=>this.processFiles(s.currentTarget.files))},async uploadFiles(){const e=this.files.filter(t=>t.uploaded===!1&&t.progress===0&&t.failed===!1);for(let t=0;t<e.length;t++){const s=e[t];try{s.progress=1;const h=await new Promise((c,i)=>{const d=new FormData;d.append("file",s.file),F.post("/api/nexopos/v4/medias",d,{headers:{"Content-Type":"multipart/form-data"}}).subscribe({next:o=>{s.uploaded=!0,s.progress=100,c(o)},error:o=>{i(o)}})})}catch{s.failed=!0}}},handleDrop(e){this.processFiles(e.dataTransfer.files),e.preventDefault(),e.stopPropagation()},preventDefaults(e){e.preventDefault(),e.stopPropagation()},triggerManualUpload(){this.$refs.files.click()},processFiles(e){Array.from(e).filter(h=>["image/png","image/gif","image/jpg","image/jpeg"].includes(h.type)).forEach(h=>{this.files.unshift({file:h,uploaded:!1,failed:!1,progress:0})})},select(e){this.pages.forEach(t=>t.selected=!1),e.selected=!0,e.name==="gallery"?this.loadGallery():e.name==="upload"&&this.loadUploadScreen()},loadGallery(e=null){e=e===null?this.queryPage:e,this.queryPage=e,F.get(`/api/nexopos/v4/medias?page=${e}&user_id=${this.user_id}${this.searchField.length>0?`&search=${this.searchField}`:""}`).subscribe(t=>{t.data.forEach(s=>s.selected=!1),this.response=t})},submitChange(e,t){F.put(`/api/nexopos/v4/medias/${t.id}`,{name:e.srcElement.textContent}).subscribe({next:s=>{t.fileEdit=!1,D.success(s.message,"OK").subscribe()},error:s=>{t.fileEdit=!1,D.success(s.message||v("An unexpected error occured."),"OK").subscribe()}})},useSelectedEntries(){this.$popupParams.resolve({event:"use-selected",value:this.response.data.filter(e=>e.selected)}),this.$popup.close()},selectResource(e){this.bulkSelect||this.response.data.forEach((t,s)=>{s!==this.response.data.indexOf(e)&&(t.selected=!1)}),e.fileEdit=!1,e.selected=!e.selected}}},mn={class:"sidebar w-48 md:h-full flex-shrink-0"},bn={class:"text-xl font-bold my-4 text-center"},_n={class:"sidebar-menus flex md:block mt-8"},gn=["onClick"],vn={key:0,class:"content w-full flex-col overflow-hidden flex"},yn={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},pn=l("div",null,null,-1),kn={class:"text-lg md:text-xl font-bold text-center text-primary mb-4"},xn={style:{display:"none"},type:"file",name:"",multiple:"",ref:"files",id:""},wn={class:"rounded w-full md:w-2/3 text-primary h-56 overflow-y-auto ns-scrollbar p-2"},$n={class:"rounded bg-info-primary flex items-center justify-center text-xs p-2"},Cn={key:1,class:"content flex-col w-full overflow-hidden flex"},Dn={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},Mn=l("div",null,null,-1),Tn={class:"flex flex-auto overflow-hidden"},Sn={class:"shadow ns-grid flex flex-auto flex-col overflow-y-auto ns-scrollbar"},En={class:"p-2 border-b border-box-background"},On={class:"ns-input border-2 rounded border-input-edge bg-input-background flex"},Fn=["placeholder"],jn={key:0,class:"flex items-center justify-center w-20 p-1"},Pn={class:"flex flex-auto"},Hn={class:"p-2 overflow-x-auto"},Yn={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},Ln={class:"p-2"},An=["onClick"],Vn=["src","alt"],qn={key:0,class:"flex flex-auto items-center justify-center"},Un={class:"text-2xl font-bold"},Rn={id:"preview",class:"ns-media-preview-panel hidden lg:block w-64 flex-shrink-0"},Bn={class:"h-64 bg-gray-800 flex items-center justify-center"},Nn=["src","alt"],zn={key:0,id:"details",class:"p-4 text-gray-700 text-sm"},In={class:"flex flex-col mb-2"},Gn={class:"font-bold block"},Qn=["contenteditable"],Wn={class:"flex flex-col mb-2"},Kn={class:"font-bold block"},Zn={class:"flex flex-col mb-2"},Jn={class:"font-bold block"},Xn={class:"p-2 flex ns-media-footer flex-shrink-0 justify-between"},er={class:"flex -mx-2 flex-shrink-0"},tr={key:0,class:"px-2"},sr={class:"ns-button shadow rounded overflow-hidden info"},lr=l("i",{class:"las la-times"},null,-1),ir={key:1,class:"px-2"},nr={class:"ns-button shadow rounded overflow-hidden info"},rr=l("i",{class:"las la-check-circle"},null,-1),dr={key:2,class:"px-2"},ar={class:"ns-button shadow rounded overflow-hidden warning"},or=l("i",{class:"las la-trash"},null,-1),ur={class:"flex-shrink-0 -mx-2 flex"},cr={class:"px-2"},fr={class:"rounded shadow overflow-hidden flex text-sm"},hr=["disabled"],mr=l("hr",{class:"border-r border-gray-700"},null,-1),br=["disabled"],_r={key:0,class:"px-2"},gr={class:"ns-button info"};function vr(e,t,s,h,c,i){const d=w("ns-close-button");return n(),r("div",{class:m(["flex md:flex-row flex-col ns-box shadow-xl overflow-hidden",i.isPopup?"w-6/7-screen h-6/7-screen":"w-full h-full"]),id:"ns-media"},[l("div",mn,[l("h3",bn,u(i.__("Medias Manager")),1),l("ul",_n,[(n(!0),r(g,null,y(c.pages,(o,f)=>(n(),r("li",{onClick:k=>i.select(o),class:m(["py-2 px-3 cursor-pointer border-l-8",o.selected?"active":""]),key:f},u(o.label),11,gn))),128))])]),i.currentPage.name==="upload"?(n(),r("div",vn,[i.isPopup?(n(),r("div",yn,[pn,l("div",null,[S(d,{onClick:t[0]||(t[0]=o=>i.popupInstance.close())})])])):a("",!0),l("div",{id:"dropping-zone",onClick:t[1]||(t[1]=o=>i.triggerManualUpload()),class:m([c.isDragging?"border-dashed border-2":"","flex flex-auto m-2 p-2 flex-col border-info-primary items-center justify-center"])},[l("h3",kn,u(i.__("Click Here Or Drop Your File To Upload")),1),l("input",xn,null,512),l("div",wn,[l("ul",null,[(n(!0),r(g,null,y(c.files,(o,f)=>(n(),r("li",{key:f,class:"p-2 mb-2 shadow ns-media-upload-item flex items-center justify-between rounded"},[l("span",null,u(o.file.name),1),l("span",$n,u(o.progress)+"%",1)]))),128))])])],2)])):a("",!0),i.currentPage.name==="gallery"?(n(),r("div",Cn,[i.isPopup?(n(),r("div",Dn,[Mn,l("div",null,[S(d,{onClick:t[2]||(t[2]=o=>i.popupInstance.close())})])])):a("",!0),l("div",Tn,[l("div",Sn,[l("div",En,[l("div",On,[E(l("input",{id:"search",type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>c.searchField=o),placeholder:i.__("Search Medias"),class:"px-4 block w-full sm:text-sm sm:leading-5 h-10"},null,8,Fn),[[O,c.searchField]]),c.searchField.length>0?(n(),r("div",jn,[l("button",{onClick:t[4]||(t[4]=o=>c.searchField=""),class:"h-full w-full rounded-tr rounded-br overflow-hidden"},u(i.__("Cancel")),1)])):a("",!0)])]),l("div",Pn,[l("div",Hn,[l("div",Yn,[(n(!0),r(g,null,y(c.response.data,(o,f)=>(n(),r("div",{key:f,class:""},[l("div",Ln,[l("div",{onClick:k=>i.selectResource(o),class:m([o.selected?"ns-media-image-selected ring-4":"","rounded-lg aspect-square bg-gray-500 m-2 overflow-hidden flex items-center justify-center"])},[l("img",{class:"object-cover h-full",src:o.sizes.thumb,alt:o.name},null,8,Vn)],10,An)])]))),128))])]),c.response.data.length===0?(n(),r("div",qn,[l("h3",Un,u(i.__("Nothing has already been uploaded")),1)])):a("",!0)])]),l("div",Rn,[l("div",Bn,[i.panelOpened?(n(),r("img",{key:0,src:i.selectedResource.sizes.thumb,alt:i.selectedResource.name},null,8,Nn)):a("",!0)]),i.panelOpened?(n(),r("div",zn,[l("p",In,[l("strong",Gn,u(i.__("File Name"))+": ",1),l("span",{class:m(["p-2",i.selectedResource.fileEdit?"border-b border-input-edge bg-input-background":""]),onBlur:t[5]||(t[5]=o=>i.submitChange(o,i.selectedResource)),contenteditable:i.selectedResource.fileEdit?"true":"false",onClick:t[6]||(t[6]=o=>i.selectedResource.fileEdit=!0)},u(i.selectedResource.name),43,Qn)]),l("p",Wn,[l("strong",Kn,u(i.__("Uploaded At"))+":",1),l("span",null,u(i.selectedResource.created_at),1)]),l("p",Zn,[l("strong",Jn,u(i.__("By"))+" :",1),l("span",null,u(i.selectedResource.user.username),1)])])):a("",!0)])]),l("div",Xn,[l("div",er,[c.bulkSelect?(n(),r("div",tr,[l("div",sr,[l("button",{onClick:t[7]||(t[7]=o=>i.cancelBulkSelect()),class:"py-2 px-3"},[lr,_(" "+u(i.__("Cancel")),1)])])])):a("",!0),i.hasOneSelected&&!c.bulkSelect?(n(),r("div",ir,[l("div",nr,[l("button",{onClick:t[8]||(t[8]=o=>c.bulkSelect=!0),class:"py-2 px-3"},[rr,_(" "+u(i.__("Bulk Select")),1)])])])):a("",!0),i.hasOneSelected?(n(),r("div",dr,[l("div",ar,[l("button",{onClick:t[9]||(t[9]=o=>i.deleteSelected()),class:"py-2 px-3"},[or,_(" "+u(i.__("Delete")),1)])])])):a("",!0)]),l("div",ur,[l("div",cr,[l("div",fr,[l("div",{class:m(["ns-button",c.response.current_page===1?"disabled cursor-not-allowed":"info"])},[l("button",{disabled:c.response.current_page===1,onClick:t[10]||(t[10]=o=>i.loadGallery(c.response.current_page-1)),class:"p-2"},u(i.__("Previous")),9,hr)],2),mr,l("div",{class:m(["ns-button",c.response.current_page===c.response.last_page?"disabled cursor-not-allowed":"info"])},[l("button",{disabled:c.response.current_page===c.response.last_page,onClick:t[11]||(t[11]=o=>i.loadGallery(c.response.current_page+1)),class:"p-2"},u(i.__("Next")),9,br)],2)])]),i.isPopup&&i.hasOneSelected?(n(),r("div",_r,[l("div",gr,[l("button",{class:"rounded shadow p-2 text-sm",onClick:t[12]||(t[12]=o=>i.useSelectedEntries())},u(i.__("Use Selected")),1)])])):a("",!0)])])])):a("",!0)],2)}var W=p(hn,[["render",vr]]),eo=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));const yr={computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":"ns-enabled"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},data(){return{}},props:["placeholder","leading","type","field"],mounted(){},methods:{toggleMedia(){new Promise((t,s)=>{P.show(W,{resolve:t,reject:s,...this.field.data||{}})}).then(t=>{t.event==="use-selected"&&(!this.field.data||this.field.data.type==="url"?this.field.value=t.value[0].sizes.original:(!this.field.data||this.field.data.type==="model")&&(this.field.value=t.value[0]),this.$forceUpdate())})}}},pr={class:"flex flex-col mb-2 flex-auto ns-media"},kr=["for"],xr={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},wr={class:"text-primary sm:text-sm sm:leading-5"},$r={class:"rounded overflow-hidden flex"},Cr={key:0,class:"form-input flex w-full sm:text-sm items-center sm:leading-5 h-10"},Dr=["src","alt"],Mr={class:"text-xs text-secondary"},Tr=["disabled","id","type","placeholder"],Sr=l("i",{class:"las la-photo-video"},null,-1),Er=[Sr],Or={key:0,class:"text-xs text-primary"};function Fr(e,t,s,h,c,i){return n(),r("div",pr,[l("label",{for:s.field.name,class:m([i.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[b(e.$slots,"default")],10,kr),l("div",{class:m([i.hasError?"has-error":"is-pristine","mt-1 relative border-2 rounded-md focus:shadow-sm"])},[s.leading?(n(),r("div",xr,[l("span",wr,u(s.leading),1)])):a("",!0),l("div",$r,[s.field.data&&s.field.data.type==="model"?(n(),r("div",Cr,[s.field.value&&s.field.value.name?(n(),r(g,{key:0},[l("img",{class:"w-8 h-8 m-1",src:s.field.value.sizes.thumb,alt:s.field.value.name},null,8,Dr),l("span",Mr,u(s.field.value.name),1)],64)):a("",!0)])):a("",!0),!s.field.data||s.field.data.type==="undefined"||s.field.data.type==="url"?E((n(),r("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=d=>s.field.value=d),disabled:s.field.disabled,onBlur:t[1]||(t[1]=d=>e.$emit("blur",this)),onChange:t[2]||(t[2]=d=>e.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([i.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,Tr)),[[B,s.field.value]]):a("",!0),l("button",{onClick:t[3]||(t[3]=d=>i.toggleMedia(s.field)),class:"w-10 h-10 flex items-center justify-center border-l-2 outline-none"},Er)])],2),!s.field.errors||s.field.errors.length===0?(n(),r("p",Or,[b(e.$slots,"description")])):a("",!0),(n(!0),r(g,null,y(s.field.errors,(d,o)=>(n(),r("p",{key:o,class:"text-xs text-error-primary"},[d.identifier==="required"?b(e.$slots,d.identifier,{key:0},()=>[_(u(e.__("This field is required.")),1)]):a("",!0),d.identifier==="email"?b(e.$slots,d.identifier,{key:1},()=>[_(u(e.__("This field must contain a valid email address.")),1)]):a("",!0),d.identifier==="invalid"?b(e.$slots,d.identifier,{key:2},()=>[_(u(d.message),1)]):a("",!0)]))),128))])}var jr=p(yr,[["render",Fr]]);const Pr={data:()=>({defaultToggledState:!1,_save:0,hasChildren:!1}),props:["href","to","label","icon","notification","toggled","identifier"],mounted(){this.hasChildren=this.$el.querySelectorAll(".submenu").length>0,this.defaultToggledState=this.toggled!==void 0?this.toggled:this.defaultToggledState,H.subject().subscribe(e=>{e.value!==this.identifier&&(this.defaultToggledState=!1)})},methods:{toggleEmit(){this.toggle().then(e=>{e&&H.emit({identifier:"side-menu.open",value:this.identifier})})},toggle(){return new Promise((e,t)=>{(!this.href||this.href.length===0)&&(this.defaultToggledState=!this.defaultToggledState,e(this.defaultToggledState))})}}},Hr={class:"flex items-center"},Yr={key:0,class:"rounded-full bg-red-600 text-white dark:text-slate-300 font-bold w-6 h-6 text-xs justify-center items-center flex"},Lr=["href"],Ar={class:"flex items-center"},Vr={key:0,class:"rounded-full bg-red-600 text-white dark:text-slate-300 font-bold w-6 h-6 text-xs justify-center items-center flex"};function qr(e,t,s,h,c,i){var o;const d=w("router-link");return n(),r("div",null,[s.to&&!e.hasChildren?(n(),M(d,{key:0,to:s.to,class:m([e.defaultToggledState?"border-blue-800 bg-gray-800 dark:border-slate-700 dark:bg-slate-700":"border-transparent bg-gray-900 dark:bg-slate-900","flex justify-between py-2 border-l-8 text-gray-200 dark:text-slate-300 dark:hover:bg-slate-700 px-3 font-bold hover:bg-gray-700"])},{default:x(()=>{var f;return[l("span",Hr,[l("i",{class:m(["las text-lg mr-2",((f=s.icon)==null?void 0:f.length)>0?s.icon:"la-star"])},null,2),_(" "+u(s.label),1)]),s.notification>0?(n(),r("span",Yr,u(s.notification),1)):a("",!0)]}),_:1},8,["to","class"])):(n(),r("a",{key:1,onClick:t[0]||(t[0]=f=>i.toggleEmit()),href:s.href||"javascript:void(0)",class:m([e.defaultToggledState?"border-blue-800 bg-gray-800 dark:border-slate-700 dark:bg-slate-700":"border-transparent bg-gray-900 dark:bg-slate-900","flex justify-between py-2 border-l-8 text-gray-200 dark:text-slate-300 dark:hover:bg-slate-700 px-3 font-bold hover:bg-gray-700"])},[l("span",Ar,[l("i",{class:m(["las text-lg mr-2",((o=s.icon)==null?void 0:o.length)>0?s.icon:"la-star"])},null,2),_(" "+u(s.label),1)]),s.notification>0?(n(),r("span",Vr,u(s.notification),1)):a("",!0)],10,Lr)),l("ul",{class:m([e.defaultToggledState?"":"hidden","submenu-wrapper"])},[b(e.$slots,"default")],2)])}var Ur=p(Pr,[["render",qr]]);const Rr={data(){return{showPanel:!1,search:""}},props:["field"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},_options(){return this.field.options.map(e=>(e.selected=e.selected===void 0?!1:e.selected,this.field.value&&this.field.value.includes(e.value)&&(e.selected=!0),e))}},methods:{__:v,addOption(e){this.field.disabled||(this.$emit("addOption",e),this.$forceUpdate(),setTimeout(()=>{},100))},removeOption(e,t){if(!this.field.disabled)return t.preventDefault(),t.stopPropagation(),this.$emit("removeOption",e),this.$forceUpdate(),setTimeout(()=>{this.search=""},100),!1}},mounted(){this.field.value&&this.field.value.reverse().forEach(t=>{const s=this.field.options.filter(h=>h.value===t);s.length>=0&&this.addOption(s[0])})}},Br={class:"flex flex-col ns-multiselect"},Nr=["for"],zr={class:"flex flex-col"},Ir={class:"flex -mx-1 -my-1 flex-wrap"},Gr={class:"rounded bg-info-secondary text-white flex justify-between p-1 items-center"},Qr={class:"pr-8"},Wr=["onClick"],Kr=l("i",{class:"las la-times"},null,-1),Zr=[Kr],Jr={key:0,class:"las la-angle-down"},Xr={key:1,class:"las la-angle-up"},ed={class:"ns-dropdown shadow"},td={class:"search border-b border-input-option-hover"},sd={class:"h-40 overflow-y-auto"},ld=["onClick"],id={key:0,class:"las la-check"},nd={key:0,class:"p-2 text-center text-primary"},rd={class:"my-2"},dd={key:0,class:"text-xs text-secondary"};function ad(e,t,s,h,c,i){return n(),r("div",Br,[l("label",{for:s.field.name,class:m([i.hasError?"text-error-secondary":"text-primary","block mb-1 leading-5 font-medium"])},[b(e.$slots,"default")],10,Nr),l("div",zr,[l("div",{onClick:t[0]||(t[0]=d=>c.showPanel=!c.showPanel),class:m([(c.showPanel,""),"select-preview flex justify-between rounded border-2 border-input-option-hover p-2 items-center"])},[l("div",Ir,[(n(!0),r(g,null,y(i._options.filter(d=>d.selected),(d,o)=>(n(),r("div",{key:o,class:"px-1 my-1"},[l("div",Gr,[l("span",Qr,u(d.label),1),l("button",{onClick:f=>i.removeOption(d,f),class:"rounded outline-none hover:bg-info-tertiary h-6 w-6 flex items-center justify-center"},Zr,8,Wr)])]))),128))]),l("div",null,[c.showPanel?(n(),r("i",Jr)):a("",!0),c.showPanel?a("",!0):(n(),r("i",Xr))])],2),c.showPanel?(n(),r("div",{key:0,class:m(["h-0 z-10",c.showPanel?"shadow":""])},[l("div",ed,[l("div",td,[E(l("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>c.search=d),class:"p-2 w-full bg-transparent text-primary outline-none",placeholder:"Search"},null,512),[[O,c.search]])]),l("div",sd,[(n(!0),r(g,null,y(i._options,(d,o)=>(n(),r("div",{onClick:f=>i.addOption(d),key:o,class:m([d.selected?"bg-info-secondary text-white":"text-primary","option p-2 flex justify-between cursor-pointer hover:bg-info-secondary hover:text-white"])},[l("span",null,u(d.label),1),l("span",null,[d.checked?(n(),r("i",id)):a("",!0)])],10,ld))),128))]),i._options.length===0?(n(),r("div",nd,u(i.__("Nothing to display")),1)):a("",!0)])],2)):a("",!0)]),l("div",rd,[!s.field.errors||s.field.errors.length===0?(n(),r("p",dd,[b(e.$slots,"description")])):a("",!0),(n(!0),r(g,null,y(s.field.errors,(d,o)=>(n(),r("p",{key:o,class:"text-xs text-error-secondary"},[d.identifier==="required"?b(e.$slots,d.identifier,{key:0},()=>[_(u(i.__("This field is required.")),1)]):a("",!0),d.identifier==="email"?b(e.$slots,d.identifier,{key:1},()=>[_(u(i.__("This field must contain a valid email address.")),1)]):a("",!0),d.identifier==="invalid"?b(e.$slots,d.identifier,{key:2},()=>[_(u(d.message),1)]):a("",!0)]))),128))])])}var od=p(Rr,[["render",ad]]);const ud={},cd={class:"my-4"},fd={class:"font-bold text-2xl"},hd={class:"text-primary"};function md(e,t){return n(),r("div",cd,[l("h2",fd,[b(e.$slots,"title")]),l("span",hd,[b(e.$slots,"description")])])}var bd=p(ud,[["render",md]]);const _d={name:"ns-search",props:["url","placeholder","value","label","method","searchArgument"],data(){return{searchText:"",searchTimeout:null,results:[]}},methods:{__:v,selectOption(e){this.$emit("select",e),this.searchText="",this.results=[]}},watch:{searchText(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchText.length>0&&F[this.method||"post"](this.url,{[this.searchArgument||"search"]:this.searchText}).subscribe({next:e=>{this.results=e},error:e=>{D.error(e.message||v("An unexpected error occured.")).subscribe()}})},1e3)}},mounted(){}},gd={class:"ns-search"},vd={class:"input-group info border-2"},yd=["placeholder"],pd={class:"relative"},kd={class:"w-full absolute shadow-lg"},xd={key:0,class:"ns-vertical-menu"},wd=["onClick"];function $d(e,t,s,h,c,i){return n(),r("div",gd,[l("div",vd,[E(l("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=d=>c.searchText=d),class:"p-2 w-full outline-none",placeholder:s.placeholder||i.__("Search..."),id:""},null,8,yd),[[O,c.searchText]])]),l("div",pd,[l("div",kd,[c.results.length>0&&c.searchText.length>0?(n(),r("ul",xd,[(n(!0),r(g,null,y(c.results,(d,o)=>(n(),r("li",{class:"border-b p-2 cursor-pointer",onClick:f=>i.selectOption(d),key:o},u(d[s.label]),9,wd))),128))])):a("",!0)])])])}var Cd=p(_d,[["render",$d]]);const Dd={data:()=>({}),props:["name","placeholder","field","leading"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},mounted(){},methods:{__:v}},Md={class:"flex flex-col flex-auto ns-select"},Td=["for"],Sd=["disabled","name"],Ed={value:null},Od=["value"],Fd={key:0,class:"text-xs ns-description"};function jd(e,t,s,h,c,i){return n(),r("div",Md,[l("label",{for:s.field.name,class:m([i.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[b(e.$slots,"default")],10,Td),l("div",{class:m([i.hasError?"has-error":"is-pristine","border-2 mt-1 relative rounded-md shadow-sm mb-2 overflow-hidden"])},[E(l("select",{disabled:s.field.disabled?s.field.disabled:!1,onChange:t[0]||(t[0]=d=>e.$emit("change",d)),name:s.field.name,"onUpdate:modelValue":t[1]||(t[1]=d=>s.field.value=d),class:m([i.inputClass,"form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 appearance-none"])},[l("option",Ed,u(i.__("Choose an option")),1),(n(!0),r(g,null,y(s.field.options,(d,o)=>(n(),r("option",{key:o,value:d.value,class:"py-2"},u(d.label),9,Od))),128))],42,Sd),[[Y,s.field.value]])],2),!s.field.errors||s.field.errors.length===0?(n(),r("p",Fd,[b(e.$slots,"description")])):a("",!0),(n(!0),r(g,null,y(s.field.errors,(d,o)=>(n(),r("p",{key:o,class:"text-xs ns-error"},[d.identifier==="required"?b(e.$slots,d.identifier,{key:0},()=>[_(u(i.__("This field is required.")),1)]):a("",!0),d.identifier==="email"?b(e.$slots,d.identifier,{key:1},()=>[_(u(i.__("This field must contain a valid email address.")),1)]):a("",!0),d.identifier==="invalid"?b(e.$slots,d.identifier,{key:2},()=>[_(u(d.message),1)]):a("",!0)]))),128))])}var Pd=p(Dd,[["render",jd]]);const Hd={data:()=>({}),props:["name","placeholder","field"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},methods:{__:v,playSelectedSound(){this.field.value.length>0&&new Audio(this.field.value).play()}}},Yd={class:"flex flex-col flex-auto"},Ld=["for"],Ad=l("button",{class:"w-10 flex item-center justify-center"},[l("i",{class:"las la-play text-2xl"})],-1),Vd=[Ad],qd=["disabled","name"],Ud=["value"],Rd={key:0,class:"text-xs text-secondary"};function Bd(e,t,s,h,c,i){return n(),r("div",Yd,[l("label",{for:s.field.name,class:m([i.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[b(e.$slots,"default")],10,Ld),l("div",{class:m([i.hasError?"border-error-primary":"border-input-edge","border-2 mt-1 flex relative overflow-hidden rounded-md shadow-sm mb-2 form-input"])},[l("div",{onClick:t[0]||(t[0]=d=>i.playSelectedSound()),class:"border-r-2 border-input-edge flex-auto flex items-center justify-center hover:bg-info-primary hover:text-white"},Vd),E(l("select",{disabled:s.field.disabled?s.field.disabled:!1,onChange:t[1]||(t[1]=d=>e.$emit("change",d)),name:s.field.name,"onUpdate:modelValue":t[2]||(t[2]=d=>s.field.value=d),class:m([i.inputClass,"text-primary block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 outline-none"])},[(n(!0),r(g,null,y(s.field.options,(d,o)=>(n(),r("option",{key:o,value:d.value,class:"py-2"},u(d.label),9,Ud))),128))],42,qd),[[Y,s.field.value]])],2),!s.field.errors||s.field.errors.length===0?(n(),r("p",Rd,[b(e.$slots,"description")])):a("",!0),(n(!0),r(g,null,y(s.field.errors,(d,o)=>(n(),r("p",{key:o,class:"text-xs text-error-primary"},[d.identifier==="required"?b(e.$slots,d.identifier,{key:0},()=>[_(u(i.__("This field is required.")),1)]):a("",!0),d.identifier==="email"?b(e.$slots,d.identifier,{key:1},()=>[_(u(i.__("This field must contain a valid email address.")),1)]):a("",!0),d.identifier==="invalid"?b(e.$slots,d.identifier,{key:2},()=>[_(u(d.message),1)]):a("",!0)]))),128))])}var Nd=p(Hd,[["render",Bd]]);const zd={data:()=>({}),mounted(){},computed:{validatedSize(){return this.size||24},validatedBorder(){return this.border||8},validatedAnimation(){return this.animation||"fast"}},props:["color","size","border","animation"]},Id={class:"flex items-center justify-center"};function Gd(e,t,s,h,c,i){return n(),r("div",Id,[l("div",{class:m(["loader ease-linear rounded-full border-gray-200",i.validatedAnimation+" border-4 border-t-4 w-"+i.validatedSize+" h-"+i.validatedSize])},null,2)])}var Qd=p(zd,[["render",Gd]]);const Wd={data:()=>({}),props:["href","label","active","to"],mounted(){}},Kd={class:"submenu"},Zd=["href"];function Jd(e,t,s,h,c,i){const d=w("router-link");return n(),r("div",null,[l("li",Kd,[s.href?(n(),r("a",{key:0,class:m([s.active?"font-bold text-white dark:text-slate-300":"text-gray-100 dark:text-slate-200","py-2 border-l-8 border-blue-800 dark:border-slate-700 px-3 block bg-gray-800 dark:bg-slate-800 dark:hover:bg-slate-700 hover:bg-gray-700"]),href:s.href},[b(e.$slots,"default")],10,Zd)):s.to?(n(),M(d,{key:1,class:m([s.active?"font-bold text-white dark:text-slate-300":"text-gray-100 dark:text-slate-200","py-2 border-l-8 border-blue-800 dark:border-slate-700 px-3 block bg-gray-800 dark:bg-slate-800 dark:hover:bg-slate-700 hover:bg-gray-700"]),to:s.to},{default:x(()=>[b(e.$slots,"default")]),_:3},8,["class","to"])):a("",!0)])])}var Xd=p(Wd,[["render",Jd]]);const ea={props:["options","row","columns","prependOptions","showOptions"],data:()=>({optionsToggled:!1}),mounted(){},methods:{__:v,sanitizeHTML(e){var t=document.createElement("div");t.innerHTML=e;for(var s=t.getElementsByTagName("script"),h=s.length;h--;)s[h].parentNode.removeChild(s[h]);return t.innerHTML},getElementOffset(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},toggleMenu(e){if(this.row.$toggled=!this.row.$toggled,this.$emit("toggled",this.row),this.row.$toggled)setTimeout(()=>{const t=this.$el.querySelectorAll(".relative > .absolute")[0],s=this.$el.querySelectorAll(".relative")[0],h=this.getElementOffset(s);t.style.top=h.top+"px",t.style.left=h.left+"px",s.classList.remove("relative"),s.classList.add("dropdown-holder")},100);else{const t=this.$el.querySelectorAll(".dropdown-holder")[0];t.classList.remove("dropdown-holder"),t.classList.add("relative")}},handleChanged(e){this.row.$checked=e,this.$emit("updated",this.row)},triggerAsync(e){e.confirm?confirm(e.confirm.message)&&F[e.type.toLowerCase()](e.url).subscribe(t=>{D.success(t.message).subscribe(),this.$emit("reload",this.row)},t=>{this.toggleMenu(),D.error(t.message).subscribe()}):(H.emit({identifier:"ns-table-row-action",value:{action:e,row:this.row,component:this}}),this.toggleMenu())},triggerPopup(e,t){const s=window.nsExtraComponents[e.component];if(e.component)return s?new Promise((h,c)=>{Popup.show(s,{resolve:h,reject:c,row:t,action:e})}):D.error(v(`Unable to load the component "${e.component}". Make sure the component is registered to "nsExtraComponents".`)).subscribe();this.triggerAsync(e)}}},ta={class:"font-sans p-2"},sa={key:0,class:"font-sans p-2"},la={class:""},ia=l("i",{class:"las la-ellipsis-h"},null,-1),na={class:"relative"},ra={key:0,class:"zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper"},da={class:"rounded-md shadow-xs"},aa={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},oa=["href","innerHTML"],ua=["onClick","innerHTML"],ca=["href","innerHTML"],fa=["innerHTML"],ha={key:2},ma={key:1,class:"font-sans p-2 flex flex-col items-center justify-center"},ba={class:""},_a=l("i",{class:"las la-ellipsis-h"},null,-1),ga={class:"relative"},va={key:0,class:"zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right -ml-28 w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper"},ya={class:"rounded-md shadow-xs"},pa={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},ka=["href","innerHTML"],xa=["onClick","innerHTML"];function wa(e,t,s,h,c,i){const d=w("ns-checkbox");return n(),r("tr",{class:m(["ns-table-row",s.row.$cssClass?s.row.$cssClass:"border text-sm"])},[l("td",ta,[S(d,{onChange:t[0]||(t[0]=o=>i.handleChanged(o)),checked:s.row.$checked},null,8,["checked"])]),s.prependOptions&&s.showOptions?(n(),r("td",sa,[l("div",la,[l("button",{onClick:t[1]||(t[1]=o=>i.toggleMenu(o)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"])},[ia,_(" "+u(i.__("Options")),1)],2),s.row.$toggled?(n(),r("div",{key:0,onClick:t[2]||(t[2]=o=>i.toggleMenu(o)),class:"absolute w-full h-full z-10 top-0 left-0"})):a("",!0),l("div",na,[s.row.$toggled?(n(),r("div",ra,[l("div",da,[l("div",aa,[(n(!0),r(g,null,y(s.row.$actions,(o,f)=>(n(),r(g,{key:f},[o.type==="GOTO"?(n(),r("a",{key:0,href:o.url,class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:i.sanitizeHTML(o.label)},null,8,oa)):a("",!0),["GET","DELETE","POPUP"].includes(o.type)?(n(),r("a",{key:1,href:"javascript:void(0)",onClick:k=>i.triggerAsync(o),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:i.sanitizeHTML(o.label)},null,8,ua)):a("",!0)],64))),128))])])])):a("",!0)])])])):a("",!0),(n(!0),r(g,null,y(s.columns,(o,f)=>(n(),r("td",{key:f,class:"font-sans p-2"},[s.row[f]&&s.row[f].type&&s.row[f].type==="link"?(n(),r("a",{key:0,target:"_blank",href:s.row[f].href,innerHTML:i.sanitizeHTML(s.row[f].label)},null,8,ca)):a("",!0),typeof s.row[f]=="string"||typeof s.row[f]=="number"?(n(),r("div",{key:1,innerHTML:i.sanitizeHTML(s.row[f])},null,8,fa)):a("",!0),s.row[f]===null?(n(),r("div",ha,u(i.__("Undefined")),1)):a("",!0)]))),128)),!s.prependOptions&&s.showOptions?(n(),r("td",ma,[l("div",ba,[l("button",{onClick:t[3]||(t[3]=o=>i.toggleMenu(o)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"])},[_a,_(" "+u(i.__("Options")),1)],2),s.row.$toggled?(n(),r("div",{key:0,onClick:t[4]||(t[4]=o=>i.toggleMenu(o)),class:"absolute w-full h-full z-10 top-0 left-0"})):a("",!0),l("div",ga,[s.row.$toggled?(n(),r("div",va,[l("div",ya,[l("div",pa,[(n(!0),r(g,null,y(s.row.$actions,(o,f)=>(n(),r(g,{key:f},[o.type==="GOTO"?(n(),r("a",{key:0,href:o.url,class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:i.sanitizeHTML(o.label)},null,8,ka)):a("",!0),["GET","DELETE","POPUP"].includes(o.type)?(n(),r("a",{key:1,href:"javascript:void(0)",onClick:k=>i.triggerAsync(o),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:i.sanitizeHTML(o.label)},null,8,xa)):a("",!0)],64))),128))])])])):a("",!0)])])])):a("",!0)],2)}var $a=p(ea,[["render",wa]]);const Ca={data(){return{childrens:[],tabState:new re}},props:["active"],computed:{activeComponent(){const e=this.childrens.filter(t=>t.active);return e.length>0?e[0]:!1}},beforeUnmount(){this.tabState.unsubscribe()},watch:{active(e,t){this.childrens.forEach(s=>{s.active=s.identifier===t})}},methods:{toggle(e){this.$emit("active",e.identifier),this.$emit("changeTab",e.identifier),this.tabState.next(e.identifier)},buildChildrens(e){this.childrens=Array.from(this.$el.querySelectorAll(".ns-tab-item")).map(s=>{const h=s.getAttribute("identifier")||void 0;return{el:s,active:!!(e&&e===h),identifier:h,label:s.getAttribute("label")||__("Unamed Tab")}}),!(this.childrens.filter(s=>s.active).length>0)&&this.childrens.length>0&&(this.childrens[0].active=!0),this.childrens.forEach(s=>{s.active&&this.toggle(s)})}},mounted(){this.buildChildrens(this.active)}},Da=["selected-tab"],Ma={class:"header ml-4 flex justify-between",style:{"margin-bottom":"-1px"}},Ta={class:"flex flex-auto"},Sa=["onClick"];function Ea(e,t,s,h,c,i){return n(),r("div",{class:"tabs flex flex-col flex-auto ns-tab","selected-tab":i.activeComponent.identifier},[l("div",Ma,[l("div",Ta,[(n(!0),r(g,null,y(c.childrens,(d,o)=>(n(),r("div",{key:o,onClick:f=>i.toggle(d),class:m([s.active===d.identifier?"border-b-0 active z-10":"border inactive","tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer"]),style:{"margin-right":"-1px"}},u(d.label),11,Sa))),128))]),l("div",null,[b(e.$slots,"extra")])]),b(e.$slots,"default")],8,Da)}var Oa=p(Ca,[["render",Ea]]);const Fa={data(){return{selectedTab:"",tabStateSubscriber:null}},computed:{},mounted(){this.tabStateSubscriber=this.$parent.tabState.subscribe(e=>{this.selectedTab=e})},beforeUnmount(){this.tabStateSubscriber.unsubscribe()},props:["label","identifier","padding"]},ja=["label","identifier"];function Pa(e,t,s,h,c,i){return n(),r("div",{label:s.label,identifier:s.identifier,class:"ns-tab-item"},[c.selectedTab===s.identifier?(n(),r("div",{key:0,class:m(["border rounded flex-auto",s.padding||"p-4"])},[b(e.$slots,"default")],2)):a("",!0)],8,ja)}var Ha=p(Fa,[["render",Pa]]);const Ya={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"]},La={class:"flex flex-col mb-2 flex-auto ns-textarea"},Aa=["for"],Va={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},qa={class:"text-secondary sm:text-sm sm:leading-5"},Ua=["rows","disabled","id","type","placeholder"],Ra={key:0,class:"text-xs text-secondary"};function Ba(e,t,s,h,c,i){return n(),r("div",La,[l("label",{for:s.field.name,class:m([i.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[b(e.$slots,"default")],10,Aa),l("div",{class:m([i.hasError?"has-error":"is-pristine","mt-1 relative border-2 overflow-hidden rounded-md focus:shadow-sm mb-2"])},[s.leading?(n(),r("div",Va,[l("span",qa,u(s.leading),1)])):a("",!0),E(l("textarea",{rows:s.field.data&&s.field.data.rows||10,disabled:s.field.disabled,"onUpdate:modelValue":t[0]||(t[0]=d=>s.field.value=d),onBlur:t[1]||(t[1]=d=>e.$emit("blur",this)),onChange:t[2]||(t[2]=d=>e.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([i.inputClass,"form-input block w-full sm:text-sm sm:leading-5"]),placeholder:s.placeholder},null,42,Ua),[[O,s.field.value]])],2),!s.field.errors||s.field.errors.length===0?(n(),r("p",Ra,[b(e.$slots,"description")])):a("",!0),(n(!0),r(g,null,y(s.field.errors,(d,o)=>(n(),r("p",{key:o,class:"text-xs text-error-primary"},[d.identifier==="required"?b(e.$slots,d.identifier,{key:0},()=>[_("This field is required.")]):a("",!0),d.identifier==="email"?b(e.$slots,d.identifier,{key:1},()=>[_("This field must contain a valid email address.")]):a("",!0),d.identifier==="invalid"?b(e.$slots,d.identifier,{key:2},()=>[_(u(d.message),1)]):a("",!0)]))),128))])}var Na=p(Ya,[["render",Ba]]),to=Object.freeze(Object.defineProperty({__proto__:null,nsMenu:Ur,nsCalendar:I,nsSubmenu:Xd,nsButton:Oe,nsLink:fn,nsInput:dn,nsSelect:Pd,nsCheckbox:Bt,nsCrud:el,nsTableRow:$a,nsSpinner:Qd,nsCrudForm:Cl,nsTextarea:Na,nsField:Qi,nsMultiselect:od,nsSwitch:z,nsDate:Pl,nsMediaInput:jr,nsCloseButton:Wt,nsIconButton:Zi,nsCkeditor:ue,nsTabs:Oa,nsTabsItem:Ha,nsDatepicker:hi,nsDateTimePicker:Q,nsNumpad:fe,nsNumpadPlus:he,nsSelectAudio:Nd,nsAvatar:De,nsDateRangePicker:G,nsDaterangePicker:Fi,nsNotice:ce,nsPaginate:be,nsSearch:Cd,nsPromptPopup:_e,nsAlertPopup:te,nsConfirmPopup:L,nsPOSLoadingPopup:me,nsPageTitle:bd},Symbol.toStringTag,{value:"Module"}));export{Xd as a,Qi as b,to as c,Wt as d,hi as e,Q as f,fn as g,eo as h,Ur as n};
