import{F as _,n as u,a as c}from"./bootstrap-414293d9.js";import{_ as e}from"./currency-47ec5b79.js";import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";import{ae as o,a6 as i,z as a,x as n,y as d,A as l,F as y,ac as w,c as k,ax as C,H as F}from"./npm~@vue~runtime-core_-ff0bdc0c.js";import{U as x}from"./npm~@vue~shared_-82b01912.js";import"./npm~lodash-f7a36ac5.js";import"./npm~@ckeditor~ckeditor5-build-classic_-a8abd726.js";import"./npm~laravel-echo-7ac8f47a.js";import"./npm~pusher-js-7b18aad5.js";import"./npm~axios-4a70c6fc.js";import"./npm~chart.js-3fed1729.js";import"./npm~rxjs-a7e91008.js";import"./npm~tslib-f3101d7c.js";import"./npm~moment-fbc5633a.js";import"./npm~vue-6a0d7c4c.js";import"./npm~@vue~runtime-dom_-a668b91e.js";import"./npm~@vue~reactivity_-481192b6.js";import"./npm~@vue~compiler-dom_-04241bb4.js";import"./npm~@vue~compiler-core_-2a2ce8c7.js";import"./npm~rx-1641e2f8.js";import"./npm~@wordpress~hooks_-18172e20.js";import"./npm~mathjs-1dff8408.js";import"./npm~@babel~runtime_-34ca84e8.js";import"./npm~decimal.js-d133ee8e.js";import"./npm~complex.js-15c479db.js";import"./npm~fraction.js-52b397f9.js";import"./npm~typed-function-e88d1f37.js";import"./npm~seedrandom-b246f2f9.js";import"./npm~javascript-natural-sort-11e7fc54.js";import"./npm~escape-latex-404addb9.js";import"./npm~numeral-faf61dd1.js";import"./npm~currency.js-57f74176.js";const q={data:()=>({form:new _,fields:[],processing:!1,steps:[],failure:0,maxFailure:2,__:e}),methods:{validate(){},verifyDBConnectivity(){},saveConfiguration(t){this.form.disableFields(this.fields);const s=this.form.getValue(this.fields);return s.language=ns.language,this.processing=!0,u.post("/api/setup/configuration",s).subscribe({next:r=>{document.location="/sign-in"},error:r=>{this.processing=!1,this.form.enableFields(this.fields),this.form.triggerFieldsErrors(this.fields,r.data),c.error(r.message,"OK").subscribe()}})},checkDatabase(){u.get("/api/setup/database").subscribe({next:t=>{this.fields=this.form.createFields([{label:e("Application"),description:e("That is the application name."),name:"ns_store_name",validation:"required"},{label:e("Username"),description:e("Provide the administrator username."),name:"admin_username",validation:"required"},{label:e("Email"),description:e("Provide the administrator email."),name:"admin_email",validation:"required"},{label:e("Password"),type:"password",description:e("What should be the password required for authentication."),name:"password",validation:"required"},{label:e("Confirm Password"),type:"password",description:e("Should be the same as the password above."),name:"confirm_password",validation:"required"}])},error:t=>{nsRouter.push("/database"),c.error("You need to define database settings","OKAY",{duration:3e3}).subscribe()}})}},mounted(){this.checkDatabase()}},B={key:1,class:"bg-white rounded shadow my-2"},V={class:"welcome-box border-b border-gray-300 p-3 text-gray-700"},D={class:"bg-gray-200 p-3 flex justify-between items-center"};function N(t,s,r,P,$,f){const m=o("ns-spinner"),b=o("ns-field"),h=o("ns-button");return i(),a("div",null,[t.fields.length===0?(i(),n(m,{key:0,size:"12",border:"4",animation:"fast"})):d("",!0),t.fields.length>0?(i(),a("div",B,[l("div",V,[(i(!0),a(y,null,w(t.fields,(p,g)=>(i(),n(b,{key:g,field:p},null,8,["field"]))),128))]),l("div",D,[l("div",null,[t.processing?(i(),n(m,{key:0,size:"8",border:"4"})):d("",!0)]),k(h,{disabled:t.processing,onClick:s[0]||(s[0]=p=>f.saveConfiguration()),type:"info"},{default:C(()=>[F(x(t.__("Install")),1)]),_:1},8,["disabled"])])])):d("",!0)])}const pe=v(q,[["render",N]]);export{pe as default};
