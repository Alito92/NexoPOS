import{s as y,o,a as d,f as a,F as u,r as f,q as w,w as c,j as b,h as v,t as r,b as F,i as m}from"./bootstrap.b3920df9.js";import{n as x}from"./setup.0fbb541b.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import"./ns-numpad-plus.dcfa5f84.js";import"./components.b3e5aaf5.js";import"./ns-notice.dcd05aaf.js";import"./ns-pos-confirm-popup.1b443749.js";import"./ns-paginate.6d11ab6e.js";import"./ns-prompt-popup.9575a5e5.js";import"./ns-alert-popup.6aa5594a.js";import"./ns-pos-loading-popup.c288281e.js";const q={data:()=>({form:new y,firstPartFields:[],secondPartFields:[],fields:[]}),methods:{validate(){if(this.form.validateFields(this.firstPartFields)&&this.form.validateFields(this.secondPartFields)){this.form.disableFields(this.firstPartFields),this.form.disableFields(this.secondPartFields),this.firstPartFields.forEach(s=>console.log(s)),this.secondPartFields.forEach(s=>console.log(s));const e={...this.form.getValue(this.firstPartFields),...this.form.getValue(this.secondPartFields)};this.checkDatabase(e).subscribe(s=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),x.push("/configuration"),nsSnackBar.success(s.message,"OKAY",{duration:5e3}).subscribe()},s=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),nsSnackBar.error(s.message,"OKAY").subscribe()})}},checkDatabase(e){return nsHttpClient.post("/api/nexopos/v4/setup/database",e)},sliceRange(e,i,s){const h=e.length,l=Math.ceil(h/i);return console.log(e),e.splice(s*l,l)}},mounted(){const e=this.form.createFields([{label:"Driver",description:"Set the database driver",name:"database_driver",value:"mysql",type:"select",options:[{label:"MySQL",value:"mysql"},{label:"Postgres",value:"pgsql"},{label:"SQLite",value:"sqlite"}],validation:"required"},{label:"Hostname",description:"Provide the database hostname",name:"hostname",value:"localhost"},{label:"Username",description:"Username required to connect to the database.",name:"username",value:"root"},{label:"Password",description:"The username password required to connect.",name:"password",value:""},{label:"Database Name",description:"Provide the database name. Leave empty to use default file for SQLite Driver.",name:"database_name",value:"nexopos_v4"},{label:"Database Prefix",description:"Provide the database prefix.",name:"database_prefix",value:"ns_",validation:"required"},{label:"Port",description:"Provide the hostname port.",name:"database_port",value:"3306",validation:"required"}]);this.firstPartFields=Object.values(this.sliceRange([...e],2,0)),this.secondPartFields=Object.values(this.sliceRange([...e],2,1))}},S={class:"bg-white rounded shadow my-4"},C={class:"welcome-box border-b border-gray-300 p-3 text-gray-700"},D={class:"md:-mx-4 md:flex"},$={class:"md:px-4 md:w-1/2 w-full"},B={class:"md:px-4 md:w-1/2 w-full"},V={class:"bg-gray-200 p-3 flex justify-end"};function L(e,i,s,h,l,_){const p=b("ns-field"),g=b("ns-button");return o(),d("div",S,[a("div",C,[a("div",D,[a("div",$,[(o(!0),d(u,null,f(e.firstPartFields,(t,n)=>(o(),v(p,{key:n,field:t,onChange:P=>e.form.validateField(t)},{default:c(()=>[a("span",null,r(t.label),1),F(e.$slots,"description",{},()=>[m(r(t.description),1)])]),_:2},1032,["field","onChange"]))),128))]),a("div",B,[(o(!0),d(u,null,f(e.secondPartFields,(t,n)=>(o(),v(p,{key:n,field:t,onChange:P=>e.form.validateField(t)},{default:c(()=>[a("span",null,r(t.label),1),F(e.$slots,"description",{},()=>[m(r(t.description),1)])]),_:2},1032,["field","onChange"]))),128))])])]),a("div",V,[w(g,{onClick:i[0]||(i[0]=t=>_.validate()),type:"info"},{default:c(()=>[m("Save Database")]),_:1})])])}var U=k(q,[["render",L]]);export{U as default};
