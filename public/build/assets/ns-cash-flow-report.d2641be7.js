import{y as b,_ as y,m as f,p as g,o as d,a as c,f as t,q as p,t as e,F as u,r as m,j as x,h as i}from"./bootstrap.f2724e83.js";import{e as D,f as v}from"./components.32f0edd1.js";import{n as w}from"./currency.cdd08e48.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";import"./ns-notice.9f3b0acd.js";import"./ns-pos-confirm-popup.e8c513d2.js";import"./ns-numpad-plus.5bc07cb0.js";import"./ns-paginate.6d5d4763.js";import"./ns-prompt-popup.b4b1dbc4.js";import"./ns-alert-popup.34201d6e.js";import"./ns-pos-loading-popup.55b6a597.js";const k={name:"ns-cash-flow",props:["store-logo","store-name"],mounted(){},components:{nsDatepicker:D,nsDateTimePicker:v},data(){return{startDate:b(),endDate:b(),report:new Object,ns:window.ns}},computed:{balance(){return Object.values(this.report).length===0?0:this.report.total_credit-this.report.total_debit},totalDebit(){return 0},totalCredit(){return 0}},methods:{__:y,nsCurrency:w,printSaleReport(){this.$htmlToPaper("report")},setStartDate(n){this.startDate=n.format("YYYY/MM/DD HH:mm")},setEndDate(n){this.endDate=n.format("YYYY/MM/DD HH:mm")},loadReport(){const n=this.startDate,o=this.endDate;f.post("/api/nexopos/v4/reports/cash-flow",{startDate:n,endDate:o}).subscribe({next:l=>{this.report=l,console.log(this.report)},error:l=>{g.error(l.message).subscribe()}})}}},S={id:"report-section",class:"px-4"},Y={class:"flex -mx-2"},B={class:"px-2"},j={class:"px-2"},F={class:"px-2"},H={class:"ns-button"},R=t("i",{class:"las la-sync-alt text-xl"},null,-1),M={class:"pl-2"},N={class:"px-2"},P={class:"ns-button"},T=t("i",{class:"las la-print text-xl"},null,-1),E={class:"pl-2"},L={id:"report",class:"anim-duration-500 fade-in-entrance"},V={class:"flex w-full"},O={class:"my-4 flex justify-between w-full"},q={class:"text-primary"},A={class:"pb-1 border-b border-dashed"},z={class:"pb-1 border-b border-dashed"},I={class:"pb-1 border-b border-dashed"},J=["src","alt"],K={class:"shadow rounded my-4"},Q={class:"ns-box"},U={class:"border-b ns-box-body"},W={class:"ns-table table w-full"},X={class:""},Z={class:"border p-2 text-left"},G={width:"150",class:"border border-error-secondary bg-error-primary p-2 text-right"},$={width:"150",class:"text-right border-success-secondary bg-success-primary border p-2"},tt={class:""},st={class:"p-2 border"},et=t("i",{class:"las la-arrow-right"},null,-1),rt={class:"p-2 border border-error-secondary bg-error-primary text-right"},ot={class:"p-2 border text-right border-success-secondary bg-success-primary"},at={class:"p-2 border"},nt=t("i",{class:"las la-arrow-right"},null,-1),dt={class:"p-2 border border-error-secondary bg-error-primary text-right"},ct={class:"p-2 border text-right border-success-secondary bg-success-primary"},lt={class:"font-semibold"},it={class:"p-2 border"},_t={class:"p-2 border border-error-secondary bg-error-primary text-right"},ht={class:"p-2 border text-right border-success-secondary bg-success-primary"},bt={class:"p-2 border"},pt={colspan:"2",class:"p-2 border text-right border-info-secondary bg-info-primary"};function ut(n,o,l,mt,a,s){const h=x("ns-date-time-picker");return d(),c("div",S,[t("div",Y,[t("div",B,[p(h,{date:a.startDate,onChange:o[0]||(o[0]=r=>s.setStartDate(r))},null,8,["date"])]),t("div",j,[p(h,{date:a.endDate,onChange:o[1]||(o[1]=r=>s.setEndDate(r))},null,8,["date"])]),t("div",F,[t("div",H,[t("button",{onClick:o[2]||(o[2]=r=>s.loadReport()),class:"rounded flex justify-between text-primary shadow py-1 items-center px-2"},[R,t("span",M,e(s.__("Load")),1)])])]),t("div",N,[t("div",P,[t("button",{onClick:o[3]||(o[3]=r=>s.printSaleReport()),class:"rounded flex justify-between text-primary shadow py-1 items-center px-2"},[T,t("span",E,e(s.__("Print")),1)])])])]),t("div",L,[t("div",V,[t("div",O,[t("div",q,[t("ul",null,[t("li",A,e(s.__("Date : {date}").replace("{date}",a.ns.date.current)),1),t("li",z,e(s.__("Document : Sale By Payment")),1),t("li",I,e(s.__("By : {user}").replace("{user}",a.ns.user.username)),1)])]),t("div",null,[t("img",{class:"w-24",src:n.storeLogo,alt:n.storeName},null,8,J)])])]),t("div",K,[t("div",Q,[t("div",U,[t("table",W,[t("thead",X,[t("tr",null,[t("th",Z,e(s.__("Account")),1),t("th",G,e(s.__("Debit")),1),t("th",$,e(s.__("Credit")),1)])]),t("tbody",tt,[(d(!0),c(u,null,m(a.report.creditCashFlow,(r,_)=>(d(),c("tr",{key:_},[t("td",st,[et,i(),t("strong",null,e(r.account),1),i(" : "+e(r.name),1)]),t("td",rt,e(s.nsCurrency(0)),1),t("td",ot,e(s.nsCurrency(r.total)),1)]))),128)),(d(!0),c(u,null,m(a.report.debitCashFlow,(r,_)=>(d(),c("tr",{key:_},[t("td",at,[nt,i(),t("strong",null,e(r.account),1),i(" : "+e(r.name),1)]),t("td",dt,e(s.nsCurrency(r.total)),1),t("td",ct,e(s.nsCurrency(0)),1)]))),128))]),t("tfoot",lt,[t("tr",null,[t("td",it,e(s.__("Sub Total")),1),t("td",_t,e(s.nsCurrency(a.report.total_debit?a.report.total_debit:0)),1),t("td",ht,e(s.nsCurrency(a.report.total_credit?a.report.total_credit:0)),1)]),t("tr",null,[t("td",bt,e(s.__("Balance")),1),t("td",pt,e(s.nsCurrency(s.balance)),1)])])])])])])])])}var Bt=C(k,[["render",ut]]);export{Bt as default};
