import{y as s,p as o,_ as a,m as i}from"./bootstrap.3799f74e.js";import{e as n,f as p}from"./components.54b4cb61.js";import{_ as c}from"./plugin-vue_export-helper.21dcd24c.js";import"./ns-notice.c1143990.js";import"./ns-pos-confirm-popup.0abd3859.js";import"./ns-numpad-plus.1f0a961b.js";import"./ns-paginate.5756789f.js";import"./ns-prompt-popup.b15aee60.js";import"./ns-alert-popup.421477a2.js";import"./ns-pos-loading-popup.22054d65.js";const u={name:"ns-profit-report",data(){return{startDate:s(),endDate:s(),products:[]}},components:{nsDatepicker:n,nsDateTimePicker:p},computed:{totalQuantities(){return this.products.length>0?this.products.map(t=>t.quantity).reduce((t,r)=>t+r):0},totalPurchasePrice(){return this.products.length>0?this.products.map(t=>t.total_purchase_price).reduce((t,r)=>t+r):0},totalSalePrice(){return this.products.length>0?this.products.map(t=>t.total_price).reduce((t,r)=>t+r):0},totalProfit(){return this.products.length>0?this.products.map(t=>t.total_price-t.total_purchase_price).reduce((t,r)=>t+r):0},totalTax(){return this.products.length>0?this.products.map(t=>t.tax_value).reduce((t,r)=>t+r):0}},methods:{printSaleReport(){this.$htmlToPaper("profit-report")},setStartDate(t){this.startDate=t.format()},loadReport(){if(this.startDate===null||this.endDate===null)return o.error(a("Unable to proceed. Select a correct time range.")).subscribe();const t=s(this.startDate);if(s(this.endDate).isBefore(t))return o.error(a("Unable to proceed. The current time range is not valid.")).subscribe();i.post("/api/nexopos/v4/reports/profit-report",{startDate:this.startDate,endDate:this.endDate}).subscribe({next:e=>{this.products=e},error:e=>{o.error(e.message).subscribe()}})},setEndDate(t){console.log(t),this.endDate=t.format()}}};function d(t,r,e,h,l,m){return null}var v=c(u,[["render",d]]);export{v as default};
