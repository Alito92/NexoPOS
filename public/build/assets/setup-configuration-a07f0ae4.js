import{F as h,n as m,a as p}from"./bootstrap-32fd8995.js";import{n as g}from"./setup-67175f23.js";import{_}from"./_plugin-vue_export-helper-c27b6911.js";import{r as i,o as t,c as r,g as a,e as o,a as n,F as v,b as w,f as y,w as k,h as C}from"./runtime-core.esm-bundler-a9e64527.js";import"./lang-643e0c49.js";import"./runtime-dom.esm-bundler-eae6104b.js";import"./preload-helper-41c905a7.js";import"./components-408e163a.js";import"./ns-alert-popup-187fdda5.js";import"./ns-avatar-image-51d4792c.js";import"./index.es-a0f39e76.js";import"./vue-upload-component-37fc7a3b.js";import"./vue.runtime.esm-bundler-1bae6fe8.js";import"./ns-pos-confirm-popup-16fa8fc0.js";import"./ns-notice-a19ab992.js";import"./ns-media-837a9b75.js";import"./ns-numpad-01515d62.js";import"./ns-numpad-plus-3c3360f4.js";import"./ns-pos-loading-popup-83ab0254.js";import"./ns-paginate-7d660ea5.js";import"./ns-prompt-popup-fd8a595f.js";import"./vue-router-99b264f5.js";const F={data:()=>({form:new h,fields:[],processing:!1,steps:[],failure:0,maxFailure:2}),methods:{validate(){},verifyDBConnectivity(){},saveConfiguration(e){return this.form.disableFields(this.fields),this.processing=!0,m.post("/api/setup/configuration",this.form.getValue(this.fields)).subscribe({next:s=>{document.location="/sign-in"},error:s=>{this.processing=!1,this.form.enableFields(this.fields),this.form.triggerFieldsErrors(this.fields,s.data),p.error(s.message,"OK").subscribe()}})},checkDatabase(){m.get("/api/setup/database").subscribe({next:e=>{this.fields=this.form.createFields([{label:"Application",description:"That is the application name.",name:"ns_store_name",validation:"required"},{label:"Username",description:"Provide the administrator username.",name:"admin_username",validation:"required"},{label:"Email",description:"Provide the administrator email.",name:"admin_email",validation:"required"},{label:"Password",type:"password",description:"What should be the password required for authentication.",name:"password",validation:"required"},{label:"Confirm Password",type:"password",description:"Should be the same as the password above.",name:"confirm_password",validation:"required"}])},error:e=>{g.push("/database"),p.error("You need to define database settings","OKAY",{duration:3e3}).subscribe()}})}},mounted(){this.checkDatabase()}},q={key:1,class:"bg-white rounded shadow my-2"},x={class:"welcome-box border-b border-gray-300 p-3 text-gray-700"},B={class:"bg-gray-200 p-3 flex justify-between items-center"};function V(e,s,N,P,$,c){const d=i("ns-spinner"),u=i("ns-field"),f=i("ns-button");return t(),r("div",null,[e.fields.length===0?(t(),a(d,{key:0,size:"12",border:"4",animation:"fast"})):o("",!0),e.fields.length>0?(t(),r("div",q,[n("div",x,[(t(!0),r(v,null,w(e.fields,(l,b)=>(t(),a(u,{key:b,field:l},null,8,["field"]))),128))]),n("div",B,[n("div",null,[e.processing?(t(),a(d,{key:0,size:"8",border:"4"})):o("",!0)]),y(f,{disabled:e.processing,onClick:s[0]||(s[0]=l=>c.saveConfiguration()),type:"info"},{default:k(()=>[C("Create Installation")]),_:1},8,["disabled"])])])):o("",!0)])}const ee=_(F,[["render",V]]);export{ee as default};
