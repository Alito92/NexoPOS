import{F as y}from"./bootstrap.673b86ff.js";import{n as w}from"./setup.f1226730.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import{b8 as u,b1 as o,aA as d,aB as a,L as b,b6 as f,ay as v,br as m,ao as r,b7 as F,aF as c,y as x}from"./runtime-core.esm-bundler.aa7a54f6.js";import"./lang.2d0006f0.js";import"./runtime-dom.esm-bundler.68a12c3b.js";import"./preload-helper.15853ff5.js";import"./components.4cfda61b.js";import"./ns-alert-popup.f86a9d3e.js";import"./ns-avatar-image.7eb56864.js";import"./index.es.f7e98ba1.js";import"./vue-upload-component.1d25656a.js";import"./vue.runtime.esm-bundler.e8ef992f.js";import"./ns-pos-confirm-popup.c7422d7d.js";import"./ns-notice.ff8c2932.js";import"./ns-media.e108fd59.js";import"./ns-numpad.287f1840.js";import"./ns-numpad-plus.349ecede.js";import"./ns-pos-loading-popup.4b0b1afb.js";import"./ns-paginate.78ee5ec7.js";import"./ns-prompt-popup.c09b192c.js";import"./vue-router.21bae665.js";const q={data:()=>({form:new y,firstPartFields:[],secondPartFields:[],fields:[]}),methods:{validate(){if(this.form.validateFields(this.firstPartFields)&&this.form.validateFields(this.secondPartFields)){this.form.disableFields(this.firstPartFields),this.form.disableFields(this.secondPartFields),this.firstPartFields.forEach(s=>console.log(s)),this.secondPartFields.forEach(s=>console.log(s));const e={...this.form.getValue(this.firstPartFields),...this.form.getValue(this.secondPartFields)};this.checkDatabase(e).subscribe(s=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),w.push("/configuration"),nsSnackBar.success(s.message,"OKAY",{duration:5e3}).subscribe()},s=>{this.form.enableFields(this.firstPartFields),this.form.enableFields(this.secondPartFields),nsSnackBar.error(s.message,"OKAY").subscribe()})}},checkDatabase(e){return nsHttpClient.post("/api/setup/database",e)},sliceRange(e,i,s){const p=e.length,l=Math.ceil(p/i);return console.log(e),e.splice(s*l,l)}},mounted(){const e=this.form.createFields([{label:"Driver",description:"Set the database driver",name:"database_driver",value:"mysql",type:"select",options:[{label:"MySQL",value:"mysql"},{label:"Postgres",value:"pgsql"},{label:"SQLite",value:"sqlite"}],validation:"required"},{label:"Hostname",description:"Provide the database hostname",name:"hostname",value:"localhost"},{label:"Username",description:"Username required to connect to the database.",name:"username",value:"root"},{label:"Password",description:"The username password required to connect.",name:"password",value:""},{label:"Database Name",description:"Provide the database name. Leave empty to use default file for SQLite Driver.",name:"database_name",value:"nexopos_v4"},{label:"Database Prefix",description:"Provide the database prefix.",name:"database_prefix",value:"ns_",validation:"required"},{label:"Port",description:"Provide the hostname port.",name:"database_port",value:"3306",validation:"required"}]);this.firstPartFields=Object.values(this.sliceRange([...e],2,0)),this.secondPartFields=Object.values(this.sliceRange([...e],2,1))}},S={class:"bg-white rounded shadow my-4"},C={class:"welcome-box border-b border-gray-300 p-3 text-gray-700"},D={class:"md:-mx-4 md:flex"},$={class:"md:px-4 md:w-1/2 w-full"},B={class:"md:px-4 md:w-1/2 w-full"},L={class:"bg-gray-200 p-3 flex justify-end"};function V(e,i,s,p,l,_){const h=u("ns-field"),g=u("ns-button");return o(),d("div",S,[a("div",C,[a("div",D,[a("div",$,[(o(!0),d(b,null,f(e.firstPartFields,(t,n)=>(o(),v(h,{key:n,field:t,onChange:P=>e.form.validateField(t)},{default:m(()=>[a("span",null,r(t.label),1),F(e.$slots,"description",{},()=>[c(r(t.description),1)])]),_:2},1032,["field","onChange"]))),128))]),a("div",B,[(o(!0),d(b,null,f(e.secondPartFields,(t,n)=>(o(),v(h,{key:n,field:t,onChange:P=>e.form.validateField(t)},{default:m(()=>[a("span",null,r(t.label),1),F(e.$slots,"description",{},()=>[c(r(t.description),1)])]),_:2},1032,["field","onChange"]))),128))])])]),a("div",L,[x(g,{onClick:i[0]||(i[0]=t=>_.validate()),type:"info"},{default:m(()=>[c("Save Database")]),_:1})])])}var te=k(q,[["render",V]]);export{te as default};
